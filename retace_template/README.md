# e2lab-教学数据治理平台前端开发文档

## 1. 前端框架

### 1.1 项目核心依赖

本项目采用前后端分离方式进行开发
- 前端以**React.JS**为核心框架
- 采用**TypeScript**进行项目类型约束
- 路由系统采用**React-Router-DOM**
- 前端UI样式采用**Material UI**框架
- 使用**Redux**模式的**React-Redux**和**Redux-Toolkit**实现前端的全局数据管理

前端所采用的其余核心依赖如下所示：

```json
{
  "react": "^17.0.2",
  "typescript": "^4.3.5",
  "@material-ui/core": "^4.12.3",
  "@material-ui/icons": "^4.11.2",
  "@material-ui/lab": "^4.0.0-alpha.60",
  "react-router-dom": "^5.2.0",
  "@types/react-router-dom": "^5.1.8",
  "redux": "^4.1.1",
  "react-redux": "^7.2.4",
  "@types/react-redux": "^7.1.18",
  "axios": "^0.21.1",
  "@reduxjs/toolkit": "^1.6.1",
  "jwt-decode": "^3.1.2",
  "redux-persist": "^6.0.0"
}
```

### 1.2 项目功能性插件

- 数据图表可视化: echarts, [echarts-for-react](https://github.com/hustcc/echarts-for-react)
- 前端代码高亮: [react-syntax-highlighter](https://github.com/react-syntax-highlighter/react-syntax-highlighter)
- 前端预览pdf文档: [react-pdf](https://www.npmjs.com/package/react-pdf)
- 前端流程图组件：[react-flow-renderer](https://reactflow.dev/)
- 拖拽与排序组件：[react-beautiful-dnd](https://www.npmjs.com/package/react-beautiful-dnd)

> 参考：类似Excel的高度自定义且可交互性的表格工具：[handsontable](https://handsontable.com/)

### 1.3 项目文件结构

整体项目结构
```
e2lab-dmp
├── node_modules/
├── public/
├── src/
├── package.json
├── package-lock.json
├── README.md
├── tsconfig.json
```

源文件`src`文件结构
```
src/
├── assets/
|   ├── images/
├── components/
|   ├── common/
|   |   ├── SnackbarAlertMessage/
|   |   ├── formsErrorVerification/
|   |   ├── index.ts
|   |   ├── ...
|   ├── layout/
|   |   ├── breadCrumbs/
|   |   ├── drawer/
|   |   ├── footer/
|   |   ├── header/
|   |   ├── pageTabs/
|   |   ├── index.ts
├── hooks/
|   ├── useKeyPress.ts
|   ├── index.ts
|   ├── ...
├── layout/
|   ├── loginLayout/
|   |   ├── LoginLayout.tsx
|   |   ├── LoginLayout.module.css
|   |   ├── index.ts
|   ├── mainLayout/
|   |   ├── MainLayout.tsx
|   |   ├── index.ts
|   ├── index.ts
├── pages/
|   ├── appsManage/
|   |   ├── admin/
|   |   |   ├── AdminAppsManagePage.tsx
|   |   |   ├── index.ts
|   |   ├── apps/
|   |   ├── index.ts
|   ├── apiStandardManage/
|   ├── dataModelManage/
|   ├── userSpace/
|   ├── loginRegister/
|   ├── HomePage.tsx
|   ├── index.ts
├── redux/
|   ├── middleware/
|   |   ├── actionLog.ts
|   ├── ThemeMode/
|   |   ├── slice.ts
|   ├── userLogin/
|   |   ├── slice.ts
|   ├── openPageTabs/
|   |   ├── slice.ts
|   ├── hooks.ts
|   ├── store.ts
├── settings/
|   ├── projectAPI.json
|   ├── projectNavMenu.tsx
|   ├── projectUserAuthorization.tsx
├── App.tsx
├── index.tsx
├── custom.d.ts

```

## 2. 前端业务功能设计

### 2.1 总述：前端完整业务功能梳理
1. 厂商数据格式标准对接与数据接入

> **功能权限**
>
> 系统管理员: 全部可见
>
> 第三方厂商: 仅可见自己厂商的对接信息、所需标准、数据和日志
>
> 教研员/教育部门/学校管理者: 可见与区域对接的所有厂商信息、数据日志

- 对接厂商信息的记录与展示
- 数据对接标准与对接功能页面展示（向厂商提供XML标准格式文档，厂商提供功能切割与数据埋点截图）
- 数据采集管理页面（实时显示已经上传到交换机的数据，并且提供数据格式规范校验提示）
- 数据上传实时日志记录

2. 数据治理核心业务：数据管理、模型管理...

> **功能权限**
>
> 系统管理员: 全部可见
>
> 教研员: 仅可见与区域相关的信息



数据、标准、模型、指标的管理
- 基础数据管理：查看已接入并存入数据库的数据（学校或区域只能看到自己的数据，系统管理员可查看所有数据）
- 分类体系管理：基于理论体系所构建地数据分类体系/分类规则树
- 基础模型管理：查看系统已有的特征工程模型（或是可以叫做数据清洗模型）与数据分析模型
- 教育数据指标库：知识图谱+评价指标体系

数据处理
- 数据分层处理：运用*分类体系管理*中的理论体系，对*基础数据管理*中的数据进行分层分类
- 特工工程处理：
  - 定量的传统特征工程处理：运用*基础模型管理*中的*特征工程模型*进行特征处理，输出描述某一学习活动的特征变量/维度
  - 定性的特征分析：运用*数据分层处理*后的带标签的分类数据，进行行为序列组合，形成特定活动
- 教育数据模型：运用*基础模型管理*中的*数据分析模型*，结合*特征工程处理*后的数据进行统计分析、预测诊断等，支持将特定功能的模型进行组合，从而方便后续同类型、同场景的数据分析
- 决策支持服务：运用*教育数据模型*的分析结果，组合成为支持用户观看、了解的数据决策服务

**使用小视频教用户如何使用模型**
**分类体系的可修改**

3. 数据治理结果输出：用户视图（决策支持）

> **功能权限**
>
> 系统管理员: 全部可见
>
> 教研员/区域管理者/学校管理者/教师/学生/家长等: 仅可见与区域相关的信息

- 决策空间：针对特定用户展示特定的*决策支持服务*
- 用户个人中心：个人资料与信息管理（暂不实现）


4. **当前缺少的功能**

**使用工作流表征前端用户使用的业务流程：提示？步骤？**

- ~~在数据标准查看页面，提供厂商上传功能区域划分与标注截图的功能~~
- ~~分类体系管理~~
- 数据分层处理优化(后期优化用户交互部分)
- 定性特征分析
- 教育数据模型的自定义与封装, 及其封装后的再次使用（教用户如何使用已有配置好的模型进行分析）
- 数据模型拖拽（参数配置、拖拽框的删除）
- 决策支持服务

### 2.2 开放应用管理——厂商信息管理与数据对接服务

#### 2.2.1 第三方应用管理

进行第三方应用信息管理，主要存储已经对接的第三方厂商的核心信息，包括：
- **已对接应用的名称 appName**: 允许一个厂商对接多个不同功能的应用
- **厂商名称 companyName**: 该应用所隶属的厂商
- **应用类型 category**: 标识该应用所属的类型, 类型按照EDUCAUSE的分类, 将应用工具划分为四类, 交互型(Interaction)/内容型(Content)/课程管理型(Course Management)/测评型(Assessment)
- **应用对象**: 该应用所服务支持的对象

#### 2.2.2 数据标准与规范

- 呈现系统管理员(高校科研团队: e2lab)发布的各类数据标准、XML格式规范等**数据标准与规范文档**.
- 点击具体的**数据标准与规范文档**可以查看已发布的过往所有版本的规范文档.
- 点击对应规范文档可以直接查看文档内容, 并支持下载.

#### 2.2.3 数据采集管理

- 第三方厂商查看所上传的XML数据
- 提供XML数据规范检查与错误信息报告

#### 2.2.4 行为日志检测

记录第三方厂商登录、数据传输等一系列的日志行为, 记录的内容包括:
- 第三方厂商操作行为日志：表格(登录、退出、下载查看标准文档、数据采集结果查看等)
- 第三方应用的数据上传流量统计：可视化图(主要呈现已对接的4类应用各自的数量，以及每类应用的上传流量)
- 异常数据预警：提供第三方应用的异常数据具体情况，包括异常应用、异常原因、时间等

### 2.3 数据、指标与模型服务

#### 2.3.1 基础数据管理
呈现从第三方应用中获取的所有的基础数据（未清洗/特征化的数据），提供一个简易的类似数据库管理系统的功能
- 可查看已经对接的应用的数据库

> 目前基础数据管理, 是以活动数据为主
> 还需要考虑如何存储表现状态数据的（如问卷、基础信息）

#### 2.3.2 数据分类管理
- 选择需要进行分类统计管理的数据表（统计action type）
- 查看到这些表的action type一共有多少类型、多少种
- 利用穿梭框，左边为全部未分类的action type，右边是归为某一类的action type。最右边可以对归类的信息进行编辑包括
  - 选择分类体系（认识领域、动作技能领域、情感领域等）：下拉框
  - 分类名称：下拉框
  - 分类描述

> 添加自定义分类体系功能

#### 2.3.3 基础模型管理
呈现两类模型：特征工程模型与数据分析模型，是后续进行教育特征数据处理（特征工程）和配置教育数据模型（数据分析）的关键
- 特征工程模型
  - 主成分分析
  - 因子分析
  - 奇异值分解
- 数据分析模型
  - 可视化分析模型: 条形图、折线图、饼图、直方图、雷达图
  - 监督学习模型: 线性回归、逻辑回归、决策树、朴素贝叶斯、支持向量机、kNN
  - 无监督学习模型: k均值聚类（k-means）、层次聚类、GMM（高斯混合模型聚类）
  - 集成学习模型: Bagging（袋装法）、Boosting（提升法）、随机森林（Fandom Forest）
  - 关联挖掘: 关联规则分析、滞后序列分析、网络分析

#### 2.3.4 教育数据指标库
教育数据指标库是为数据和模型分析结果赋予教学意义的关键，包括两个“库”：
- 学科知识图谱：实现图谱展示，体现学科知识的属性与关联结构
- 教育评价指标库：核心素养指标、能力指标等量化指标库，是呈现知识掌握的目标与方法的标准

#### 2.3.5 教育特征数据处理
运用特征工程模型（来自基础模型管理）对基础数据（来自基础数据管理）进行分析，并结合教育数据指标（来自知识图谱与指标库）输出具有**教学意义的特征数据变量**。具体步骤如下：
- 新建特征变量表
- 选择输入的数据变量（来自基础数据管理）
- 选择进行特征处理的特征工程模型（基础模型管理中的特征工程模型）
- 获取输出的特征数据（维度、因子等）
- 为特征数据建立与教育数据指标库的关联
- 保存特征处理后的数据到特征变量表中

> 特征数据处理与数据模型的拖拽, 需要再添加点击每个节点时编辑具体的模型信息（如参数调节、输入数据需要填入哪些数据）

#### 2.3.6 教育数据模型管理
运用特征变量、基础变量，运用对应的数据分析模型进行统计、分析、归因、推断等
- 新建教育数据模型
- 先择输入的特征变量或基础变量
- 选择所需的数据分析模型
- 获取输出的模型分析结果
- 将分析结果与教育数据指标库进行关联
- 保存教育数据模型

#### 2.3.7 决策支持服务管理
配置呈现给用户的决策支持服务信息模型
- 新建教育教学决策支持服务场景
- 为决策支持服务场景添加服务场景
- 处理决策支持服务的输出结果呈现形式（对图表、数据的格式、形式、强调重点等进行编辑——提供已有的呈现模板库+自定义）

### 2.3 用户决策支持服务

#### 2.3.1 成长档案

#### 2.3.2 决策空间

## 3. 前后端接口: 前端业务与数据设计


## 4. 前端性能、稳定性测试


