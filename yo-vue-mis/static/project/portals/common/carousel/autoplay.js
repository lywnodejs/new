"use strict";Function.prototype.hasOwnProperty("bind")||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError;var i=[].slice,n=i.call(arguments,1);return function(){return fn.apply(t||this,n.concat(i.call(arguments)))}}),function(t,i){"function"==typeof define?define("common/carousel/autoplay",i):t.Carousel=i()}(window,function(){var t,i=function(t,i){return"string"==typeof t?(i||document).querySelector(t):t},n=function(t,i){return(i||document).getElementsByTagName(t)},e=function(t,i,n){if(null!=t){var e=Array.prototype.forEach;if(e&&t.forEach===e)t.forEach(i,n);else if(t.length===+t.length)for(var s=0,o=t.length;s<o&&!1!==i.call(n,t[s],s,t);s++);}};!function(){var i={Webkit:"webkit",Moz:"",O:"o"},n=document.createElement("div");for(var e in i)if(void 0!==n.style[e+"TransitionProperty"])return t="-"+e.toLowerCase()+"-",n=i=null,!1}();var s=function(){var t=document.createElement("div"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in i)if(void 0!==t.style[n])return t=null,i[n]}(),o=function(t,e){this.defOpts={time:4e3,sepTime:1e3,width:0,autoPlay:!1,onresize:function(){}},e=e||{};for(var s in e)this.defOpts[s]=e[s];this.el=i(t),this.ul=n("ul",this.el)[0],this.lis=Array.prototype.slice.call(n("li",this.ul)),this.lis.push(this.lis[0].cloneNode(!0)),this.ul.appendChild(this.lis[this.lis.length-1]),this.ul.style.width="80000px",this.autoTimmer=this.autoTimeOut=null,this.curr=0,this.init()};return o.version="1.0.0",o.prototype={constructor:o,init:function(){var t=this;this.setElWidth(),this.initELTransform(),this.createPoint(),this.aBtn=n("li",this.conutEl),this.el.addEventListener("mouseover",function(){clearInterval(t.autoTimmer)}),this.el.addEventListener("mouseout",this.start.bind(this)),e(this.aBtn,function(i,n){i.index=n,i.addEventListener("mouseover",function(){t.curr=i.index,t.toggle(i.index).doMove()})}),this.initWindowEvent(),this.toggle(0),this.defOpts.autoPlay&&this.start()},getWinWidth:function(){var t=window,i=document,n=i.documentElement,e=i.getElementsByTagName("body")[0];return t.innerWidth||n.clientWidth||e.clientWidth},initWindowEvent:function(){var t=this;window.addEventListener("resize",function(){clearTimeout(t.autoTimeOut),clearInterval(t.autoTimmer),t.autoTimeOut=setTimeout(t.start.bind(t),50)}),window.addEventListener("blur",this.stop.bind(this)),window.addEventListener("focus",this.start.bind(this))},start:function(){this.defOpts.onresize.call(this),this.setElWidth(),this.oneMoveLen=this.lis[0].offsetWidth,clearInterval(this.autoTimmer),this.autoTimmer=setInterval(this.next.bind(this),this.defOpts.time)},stop:function(){this.autoTimmer&&(clearInterval(this.autoTimmer),this.autoTimmer=null)},setElWidth:function(){var t=this.getWinWidth();e(this.lis,function(i){i.style.width=t+"px"})},initELTransform:function(t){this.setCss3(this.ul,{transform:"translate3d(0,0,0)",transition:"none"})},setCss3:function(i,n,e){if("string"==typeof n)return void(i.style[t+n]=e);for(var s in n)n.hasOwnProperty(s)&&(i.style[t+s]=i.style[s]=n[s])},createPoint:function(){this.conutEl=document.createElement("ul"),this.conutEl.className="slider-box-conut";for(var t,i=document.createDocumentFragment(),n=this.lis.length-1,e=0;e<n;)t=document.createElement("li"),i.appendChild(t),e++;this.conutEl.appendChild(i),this.el.appendChild(this.conutEl)},toggle:function(t){return e(this.aBtn,function(t,i){t.className=""}),this.aBtn[t].className="current",this},next:function(){this.curr++;var t=this,i=function(){t.initELTransform(),t.ul.removeEventListener(s,i)};return this.curr<this.lis.length-1?(this.toggle(this.curr).doMove(),this):this.curr===this.lis.length-1?(this.toggle(0),this.ul.addEventListener(s,i,!1),this.doMove(),this.curr=0,this):void 0},doMove:function(){var t=-this.curr*this.oneMoveLen,i=this;requestAnimationFrame(function(){i.setCss3(i.ul,{transform:"translate3d("+t+"px,0,0)",transition:"all "+i.defOpts.sepTime+"ms ease-in-out"})})}},o});