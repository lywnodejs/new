define("js/common/throttle",["require","exports","module"],function(t,e,n){return function(t,e){var n,i,r,o,u=0,s=null,c=function(){u=+new Date,s=null,r=t.apply(i,n),s||(i=n=null)};return function(){var h=+new Date;return n=arguments,i=this,o=e-(h-u),o<=0||o>e?(s&&(clearTimeout(s),s=null),u=h,r=t.apply(i,n),s||(i=n=null)):s||(s=setTimeout(c,o)),r}}}),define("js/common/validate-length",["require","exports","module","./throttle"],function(t,e,n){var i=t("./throttle"),r=function(t){if(!(this instanceof r))return new r(t);this.init(t)},o={showText:"还能输入<b>{num}</b>字",exceedText:'已超出<b class="i-error">{num}</b>字',selector:"[data-input-length]"};return r.prototype={constructor:r,init:function(t){var e=this;return this.opts=t||{},Object.keys(o).forEach(function(t){e.opts[t]=e.opts[t]||o[t]}),e.initView()},initView:function(){if(this.el=document.querySelector(this.opts.selector),this.el)return this.bindEvent(),this},bindEvent:function(){var t=this,e=0|this.el.getAttribute("inputlength"),n=!!this.el.getAttribute("ignore"),r=document.querySelector(this.el.getAttribute("show-text")),o=i(function(){var i,o,u=t.el;if(u){try{i=(u.value||"").trim()}catch(t){console.log(t)}if(o=n?i.length:i.replace(/[\u4e00-\u9fa5]/g,"**").length,t.strLength=o,!isNaN(e)&&r)return o>e?void(r.innerHTML=t.opts.exceedText.replace("{num}",o-e)):void(r.innerHTML=t.opts.showText.replace("{num}",e-o))}},200);"blur paste  input".split(/\s+/).forEach(function(e){t.el.addEventListener(e,o)}),o(),t.el.__checklen=o}},r}),define("js/common/observer",["require","exports","module"],function(t,e,n){var i=function(){this.func={}},r=Array.prototype.slice;return i.prototype={constructor:i,fire:function(t){if(t){var e=r.call(arguments,1),n=this.func[t];return n&&n.length&&n.forEach(function(t){t.apply(this,e)}),this}},on:function(t,e){return void 0===e?this:((this.func[t]||(this.func[t]=[])).push(e),this)},remove:function(t,e){if(0===arguments.length)return this.func={},this;if(!this.func[t])return this;if(void 0===e)return delete this.func[t],this;var n=this.func[t].indexOf(e);return-1===n?this:(this.func[t].splice(n,1),this)},hasName:function(t){return t in this.func}},new i}),define("js/common/textarea-height-auto",["require","exports","module","./throttle","./observer"],function(t,e,n){var i,r=t("./throttle"),o=t("./observer");return i=window.attachEvent?function(t,e,n){t.attachEvent("on"+e,n)}:function(t,e,n){t.addEventListener(e,n,!1)},function(t,e){function n(){u=t.scrollHeight,u>c?(l.overflowY="scroll",l.height=c+"px",s={height:c+"px",overflowY:"scroll"}):(l.overflowY="hidden",l.height="auto",l.height=t.scrollHeight+"px",s={height:t.scrollHeight+"px",overflowY:"hidden"}),o.fire("text-resize-height",s)}e=e||{};var u,s,c=e.maxHeight||200,h=r(n,50),l=t.style;i(t,"change",n),["cut","paste","drop","keyup"].forEach(function(e){i(t,e,h)}),n()}}),define("js/common/comment/textareaInit",["require","exports","module","../validate-length","../textarea-height-auto"],function(t,e,n){var i=t("../validate-length"),r=t("../textarea-height-auto");return function(t){i(),r(t),t.addEventListener("focus",function(){t.parentElement.classList.add("focus")}),t.addEventListener("blur",function(){t.parentElement.classList.remove("focus")})}});