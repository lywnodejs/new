"use strict";define("js/common/textarea-utils",["require","exports","module"],function(e,t,n){var a,r=r;return a={setSelectionRange:function(e,t,n){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",n),a.moveStart("character",t),a.select()}},getCaretPosition:function(e){var t=0;if(r){e.focus();var n=r.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else"selectionStart"in e&&(t=e.selectionStart);return t},insertAtCaret:function(e,t){if(r)e.focus(),sel=r.createRange(),sel.text=t,e.focus();else if(e.selectionStart||"0"===String(e.selectionStart)){var n=e.selectionStart,a=e.selectionEnd,c=e.scrollTop;e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length),e.focus(),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.scrollTop=c}else e.value+=t,e.focus()},insertText:function(e,t,n,c){if(e.focus(),i=i||0,r){var l=r.createRange();l.moveStart("character",-c),l.text=t}else{var s=e.value,o=n-c,i=o+t.length;e.value=s.slice(0,o)+t+s.slice(n,s.length),a.setSelectionRange(e,i,i)}}}});