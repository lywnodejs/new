define("js/../../../lib/es6-promise/es6-promise",["require","exports","module"],function(e,t,n){"use strict";function o(e){return"function"==typeof e}function r(){var e=setTimeout;return function(){return e(i,1)}}function i(){for(var e=0;e<D;e+=2)(0,q[e])(q[e+1]),q[e]=void 0,q[e+1]=void 0;D=0}function s(e,t){var n=arguments,o=this,r=new this.constructor(c);void 0===r[I]&&b(r);var i=o._state;return i?function(){var e=n[i-1];C(function(){return y(i,r,e,o._result)})}():h(o,r,e,t),r}function a(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(c);return d(t,e),t}function c(){}function u(e){try{return e.then}catch(e){return P.error=e,P}}function l(e,t,n){t.constructor===e.constructor&&n===s&&t.constructor.resolve===a?function(e,t){t._state===M?f(e,t._result):t._state===N?m(e,t._result):h(t,void 0,function(t){return d(e,t)},function(t){return m(e,t)})}(e,t):n===P?m(e,P.error):void 0===n?f(e,t):o(n)?function(e,t,n){C(function(e){var o=!1,r=function(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}(n,t,function(n){o||(o=!0,t!==n?d(e,n):f(e,n))},function(t){o||(o=!0,m(e,t))},e._label);!o&&r&&(o=!0,m(e,r))},e)}(e,t,n):f(e,t)}function d(e,t){e===t?m(e,new TypeError("You cannot resolve a promise with itself")):function(e){return"function"==typeof e||"object"==typeof e&&null!==e}(t)?l(e,t,u(t)):f(e,t)}function p(e){e._onerror&&e._onerror(e._result),g(e)}function f(e,t){e._state===R&&(e._result=t,e._state=M,0!==e._subscribers.length&&C(g,e))}function m(e,t){e._state===R&&(e._state=N,e._result=t,C(p,e))}function h(e,t,n,o){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+M]=n,r[i+N]=o,0===i&&e._state&&C(g,e)}function g(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,r=void 0,i=e._result,s=0;s<t.length;s+=3)o=t[s],r=t[s+n],o?y(n,o,r,i):r(i);e._subscribers.length=0}}function v(){this.error=null}function y(e,t,n,r){var i=o(n),s=void 0,a=void 0,c=void 0,u=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return Y.error=e,Y}}(n,r))===Y?(u=!0,a=s.error,s=null):c=!0,t===s)return void m(t,new TypeError("A promises callback cannot return that same promise."))}else s=r,c=!0;t._state!==R||(i&&c?d(t,s):u?m(t,a):e===M?f(t,s):e===N&&m(t,s))}function b(e){e[I]=W++,e._state=void 0,e._result=void 0,e._subscribers=[]}function x(e,t){this._instanceConstructor=e,this.promise=new e(c),this.promise[I]||b(this.promise),T(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?f(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&f(this.promise,this._result))):m(this.promise,new Error("Array Methods must be provided an Array"))}function w(e){this[I]=W++,this._result=this._state=void 0,this._subscribers=[],c!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof w?function(e,t){try{t(function(t){d(e,t)},function(t){m(e,t)})}catch(t){m(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var _=void 0,T=_=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},D=0,A=void 0,j=void 0,C=function(e,t){q[D]=e,q[D+1]=t,2===(D+=2)&&(j?j(i):F())},O="undefined"!=typeof window?window:void 0,k=O||{},S=k.MutationObserver||k.WebKitMutationObserver,$="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),E="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,q=new Array(1e3),F=void 0;F=$?function(){return process.nextTick(i)}:S?function(){var e=0,t=new S(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():E?function(){var e=new MessageChannel;return e.port1.onmessage=i,function(){return e.port2.postMessage(0)}}():void 0===O&&"function"==typeof e?function(){try{var t=e("vertx");return void 0!==(A=t.runOnLoop||t.runOnContext)?function(){A(i)}:r()}catch(e){return r()}}():r();var I=Math.random().toString(36).substring(16),R=void 0,M=1,N=2,P=new v,Y=new v,W=0;return x.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===R&&n<e;n++)this._eachEntry(t[n],n)},x.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===a){var r=u(e);if(r===s&&e._state!==R)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===w){var i=new n(c);l(i,e,r),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},x.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===R&&(this._remaining--,e===N?m(o,n):this._result[t]=n),0===this._remaining&&f(o,this._result)},x.prototype._willSettleAt=function(e,t){var n=this;h(e,void 0,function(e){return n._settledAt(M,t,e)},function(e){return n._settledAt(N,t,e)})},w.all=function(e){return new x(this,e).promise},w.race=function(e){var t=this;return new t(T(e)?function(n,o){for(var r=e.length,i=0;i<r;i++)t.resolve(e[i]).then(n,o)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},w.resolve=a,w.reject=function(e){var t=new this(c);return m(t,e),t},w._setScheduler=function(e){j=e},w._setAsap=function(e){C=e},w._asap=C,w.prototype={constructor:w,then:s,catch:function(e){return this.then(null,e)}},w.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=w},w.Promise=w,w}),define("js/common/dialog/validateDialogForm",["require","exports","module","./../../../../../lib/es6-promise/es6-promise"],function(e,t,n){var o=e("./../../../../../lib/es6-promise/es6-promise");return function(e,t,n,r,i){return new o(function(o,s){!0!==t.sendDataing&&(angular.forEach(e.$error.required,function(e){e.$setTouched()}),n.showErrors=!0,r(function(){return i&&(document.querySelector(".ng-invalid")||Object.keys(e.$error).length)?(console.log(e),void s()):Object.keys(e.$error).length?(console.log(e),void s()):void o()}))})}}),define("js/common/dialog/showSuccessDialog",["require","exports","module"],function(e,t,n){var o={msg:"数据提交成功",content:"",time:0,timeout:0,width:450,data:{},successFn:function(){window.location.reload()}};return function(e,t,n){n=angular.extend({},o,n||{});var r=n.template||'<p class="success-lg-text i-tc">'+(n.msg||"")+"</p>"+(n.content?'<div style="text-align:center">'+n.content+"</div>":"")+'<div class="wrap-center-btn"> <button class="p-btn" ng-click="dialogConfirm()">确认</button> </div>',i=e.open({template:r,className:"ngdialog-theme-default p-dialog js-showSuccessDialog",plain:!0,width:n.width,showClose:!1,trapFocus:!1,overlay:!0,name:"showSuccessDialog",controller:["$scope","$timeout",function(e,o){var r=function(){i.closeEd||(i.closeEd=!0,i.close(),n.successFn(n.data))};e.dialogConfirm=r,t.$on("ngDialog.closed",function(e,t){t.hasClass("js-showSuccessDialog")&&r()}),n.timeout&&o(function(){r()},n.timeout)}]});return i.closeEd=!1,i}}),define("js/bug/send-data",["require","exports","module","./../../../../lib/es6-promise/es6-promise"],function(e,t,n){var o=e("./../../../../lib/es6-promise/es6-promise");return function(e,t,n,r,i){return r.sendDataing=!0,new o(function(o,i){e({method:"POST",url:t,data:n}).success(function(e){"0"===String(e.errno)&&(r.close(),o(e),r.sendDataing=!1)}).error(function(e){r.sendDataing=!1,i(e)})})}}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!js/common/dialog/tpl/input-reason-desc.html",[],function(){return'<form class="p-form" name="reasonForm">\n    {{desc}}\n    <div class="p-form-item">\n        <div class="wrap-input p-col-12" ng-class="{\'p-error\':reasonForm.reason.$error.required && reasonForm.reason.$touched}">\n            <textarea class="p-form-control p-reason" ng-required="true" name="reason" placeholder="请输入原因" ng-model="reason"></textarea>\n            <span ng-show="reasonForm.reason.$error.required" class="p-error-msg">请输入原因</span>\n        </div>\n    </div>\n</form>\n<div class="wrap-center-btn">\n    <button class="p-btn" ng-click="pageAgree()">{{confirmText}}</button>\n    <button class="p-btn p-btn-gray" ng-click="dialogClose($event)">{{cancelText}}</button>\n</div>'}),define("js/common/datetimepicder-pop-init/time-option",["require","exports","module"],function(e,t,n){return{formatYear:"yy",maxDate:new Date(2030,5,22),minDate:new Date,initDate:new Date,showWeeks:!0}}),define("js/common/datetimepicder-pop-init/index",["require","exports","module","./time-option"],function(e,t,n){var o=e("./time-option");return function(e,t){e.expireTimeOptions=angular.extend({},o,t),e.expireTimeIsOpen=!1,e.expireTimeOpen=function(){e.expireTimeIsOpen=!0},e.expireTimeClose=function(){e.expireTimeIsOpen=!1}}}),define("js/common/dialog/showInputReason",["require","exports","module","./validateDialogForm","./showSuccessDialog","../../bug/send-data","text!./tpl/input-reason-desc.html","../datetimepicder-pop-init/index"],function(e,t,n){var o=e("./validateDialogForm"),r=e("./showSuccessDialog"),i=e("../../bug/send-data"),s=e("text!./tpl/input-reason-desc.html"),a=e("../datetimepicder-pop-init/index"),c={template:s,className:"ngdialog-theme-default p-dialog",plain:!0,width:538,height:360,showClose:!0,overlay:!0,name:"showInputReason",btnText:{confirmText:"确认",cancelText:"取消"},successOpts:{},sendDataSuccess:function(){}};return function(e,t,n,u,l){n=n||{},l=angular.extend({},c,l||{});var d=e.open(angular.extend({},l,{template:s.replace("{{desc}}",u||""),controller:["$scope","$element","$timeout","$http","$rootScope",function(s,c,u,p,f){a(s,{maxDate:null,minDate:null}),s.dialogClose=function(e){e.stopImmediatePropagation(),d.close()},s.confirmText=l.btnText.confirmText,s.cancelText=l.btnText.cancelText,s.pageAgree=function(){o(s.reasonForm,d,s,u).then(function(){"function"==typeof l.onAgreeCallback?l.onAgreeCallback(d,s):i(p,t,angular.extend({reason:s.reason},n||{}),d).then(function(t){r(e,f,angular.extend({msg:"设置成功",data:t},l.successOpts))})})},s.$on("ngDialog.opened",function(e,t){"function"==typeof l.onOpenedCallback&&l.onOpenedCallback(s,d)})}]}));return d}}),define("text!js/bug-detail/delay.html",[],function(){return'<div class="red-color">请慎重选择延期操作！</div>\n<div class="p-form-item form-flex align-start">\n    <label class="item-label">期望修复时间：</label>\n    <div class="wrap-input form-flex-item">\n        <div class="input-group p-col-6">\n            <input id="occured_time" class="form-control js-date-picker" type="text" name="expireTime" readonly="readonly" uib-datepicker-popup\n                close-text="关闭" clear-text="清除" current-text="今天" datepicker-popup="yyyy-MM-dd" datepicker-options="expireTimeOptions"\n                ng-required="true" is-open="expireTimeIsOpen" onclose="expireTimeClose()" ng-model="expireTime" ng-click="expireTimeOpen()">\n            <span class="input-group-btn" ng-click="expireTimeOpen()">\n                <button type="button" class="btn btn-default">\n                    <i class="glyphicon glyphicon-calendar"></i>\n                </button>\n            </span>\n        </div>\n    </div>\n</div>\n<div>延期需您的上级和安全工程师共同审批后方可生效。若未延期将逐级向上通报到CTO。</div>'}),define("js/bug-detail/dialog-notRepeair",["require","exports","module","./../common/dialog/showInputReason","text!./delay.html"],function(e,t,n){var o=e("./../common/dialog/showInputReason"),r=e("text!./delay.html");return function(e,t,n){var i={type:0,holeId:n},s={btnText:{confirmText:"确认延期",cancelText:"取消"}},a={btnText:{confirmText:"确认不修复",cancelText:"取消"}};e.showConfirmNotRepeair=function(){o(t,"/hole/confirmNoRepair",i,'<div class="red-color">请慎重确认该漏洞是否不修复！</div>若不修复，该漏洞的可能产生安全风险。',a)},e.showConfirmNotRepeair2=function(){o(t,"/hole/confirmNoRepair",i,'<div class="red-color">请慎重确认该漏洞是否可以不修复，以及该漏洞安全风险是否可控</div>',a)},e.showNotRepeair=function(){o(t,"/hole/noRepair",{holeId:n},'<div class="red-color">请慎重选择不修复操作！</div>需要上级跟安全工程师确认并承担风险！')},e.showAgreedDelay=function(){o(t,"/delay/confirm",{holeId:n},'<div class="red-color">请慎重确认该漏洞是否可以延期，以及该漏洞安全风险是否可控</div>',s)},e.showRefusedDelay=function(){e.showDialog("/delay/returnBack","设置成功",{type:1})},e.showDelay=function(){o(t,"",i,r,angular.extend(s,{height:450,onAgreeCallback:function(t,n){e.pageData.expireTime=n.expireTime,e.pageData.remark=n.reason,t.close(),e.repaire()},onOpenedCallback:function(t){t.expireTime=e.pageData.expireTime,t.reason=e.pageData.remark}}))}}});