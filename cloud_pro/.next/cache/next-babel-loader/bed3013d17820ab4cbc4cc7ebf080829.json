{"ast":null,"code":"import \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nvar __jsx = React.createElement;\nimport { SearchOutlined } from '@ant-design/icons';\nimport React, { useEffect, useState } from 'react';\nvar RangePicker = _DatePicker.RangePicker;\nimport { REPORT_TYPE } from '~/utils/const';\nimport moment from 'moment';\nexport default function (props) {\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState([]),\n      p_category = _useState[0],\n      setPCategory = _useState[1];\n\n  var _useState2 = useState([]),\n      c_category = _useState2[0],\n      setCCategory = _useState2[1];\n\n  useEffect(function () {\n    var p_arr = props.allCategory.filter(function (v) {\n      return !v.pid;\n    });\n    setPCategory(p_arr);\n  }, [props.allCategory]);\n\n  var changePCategory = function changePCategory(val) {\n    console.log(val);\n\n    if (val === null) {\n      return setCCategory([]);\n    }\n\n    var c_arr = props.allCategory.filter(function (v) {\n      return v.pid == val;\n    });\n    setCCategory(c_arr);\n  };\n\n  var onSearch = function onSearch() {\n    var _form$getFieldsValue = form.getFieldsValue(),\n        time = _form$getFieldsValue.time,\n        params = _objectWithoutProperties(_form$getFieldsValue, [\"time\"]);\n\n    if (Array.isArray(time) && time.length == 2) {\n      params.startNeedReportDate = moment(time[0]).format('YYYY-MM-DD');\n      params.endNeedReportDate = moment(time[1]).format('YYYY-MM-DD');\n    }\n\n    props.search(params);\n  };\n\n  var resetForm = function resetForm() {\n    form.resetFields();\n    onSearch();\n  };\n\n  var exportData = function exportData() {\n    _message.error('功能未实现');\n  };\n\n  return __jsx(_Card, {\n    style: {\n      marginBottom: 30\n    }\n  }, __jsx(_Form, {\n    form: form,\n    name: \"search\",\n    initialValues: {\n      status: null,\n      catId: null,\n      subCatId: null,\n      productId: null\n    },\n    layout: \"inline\"\n  }, __jsx(_Form.Item, {\n    label: \"\\u501F\\u636E\\u53F7\",\n    name: \"orderNum\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u501F\\u636E\\u53F7\",\n    style: {\n      width: 150\n    }\n  })), __jsx(_Form.Item, {\n    label: \"\\u624B\\u673A\\u53F7\",\n    name: \"mobilePhone\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u624B\\u673A\\u53F7\",\n    style: {\n      width: 150\n    }\n  })), __jsx(_Form.Item, {\n    label: \"\\u503A\\u52A1\\u4EBA\\u540D\\u79F0\",\n    name: \"name\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u503A\\u52A1\\u4EBA\\u540D\\u79F0\",\n    style: {\n      width: 150\n    }\n  })), __jsx(_Form.Item, {\n    label: \"\\u503A\\u52A1\\u4EBA\\u8EAB\\u4EFD\\u6807\\u8BC6\\u53F7\\u7801\",\n    name: \"idCard\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u503A\\u52A1\\u4EBA\\u8EAB\\u4EFD\\u6807\\u8BC6\\u53F7\\u7801\",\n    style: {\n      width: 150\n    }\n  })), __jsx(_Form.Item, {\n    label: \"\\u4EA7\\u54C1\\u540D\\u79F0\",\n    name: \"productId\"\n  }, __jsx(_Select, {\n    style: {\n      width: 150\n    }\n  }, __jsx(_Select.Option, {\n    value: null\n  }, \"\\u5168\\u90E8\"), props.allProducts.map(function (v, i) {\n    return __jsx(_Select.Option, {\n      value: v.productId,\n      key: i\n    }, v.name);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u4FE1\\u606F\\u8BB0\\u5F55\\u5927\\u7C7B\",\n    name: \"catId\"\n  }, __jsx(_Select, {\n    style: {\n      width: 150\n    },\n    onChange: changePCategory\n  }, __jsx(_Select.Option, {\n    value: null\n  }, \"\\u5168\\u90E8\"), p_category.map(function (v, i) {\n    return __jsx(_Select.Option, {\n      value: v.id,\n      key: i\n    }, v.name);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u4FE1\\u606F\\u8BB0\\u5F55\\u7C7B\\u578B\",\n    name: \"subCatId\"\n  }, __jsx(_Select, {\n    style: {\n      width: 150\n    }\n  }, __jsx(_Select.Option, {\n    value: null\n  }, \"\\u5168\\u90E8\"), c_category.map(function (v, i) {\n    return __jsx(_Select.Option, {\n      value: v.id,\n      key: i\n    }, v.name);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u4E0A\\u62A5\\u6807\\u8BC6\",\n    name: \"status\"\n  }, __jsx(_Select, {\n    style: {\n      width: 120\n    }\n  }, __jsx(_Select.Option, {\n    value: null\n  }, \"\\u5168\\u90E8\"), REPORT_TYPE.map(function (v, i) {\n    return __jsx(_Select.Option, {\n      value: v.key,\n      key: i\n    }, v.name);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u5E94\\u4E0A\\u62A5\\u65E5\\u671F\",\n    name: \"time\"\n  }, __jsx(RangePicker, null)), __jsx(_Form.Item, null, __jsx(_Button, {\n    type: \"primary\",\n    onClick: onSearch\n  }, \"\\u67E5\\u8BE2\")), __jsx(_Form.Item, null, __jsx(_Button, {\n    onClick: resetForm\n  }, \"\\u91CD\\u7F6E\")), __jsx(_Form.Item, null, __jsx(_Button, {\n    type: \"primary\",\n    onClick: exportData\n  }, \"\\u5BFC\\u51FA\\u4E0A\\u62A5\\u6587\\u4EF6\")), __jsx(_Form.Item, null, __jsx(_Button, {\n    type: \"primary\",\n    onClick: function onClick() {\n      return props.importData(true);\n    }\n  }, \"\\u5BFC\\u5165\\u53CD\\u9988\\u6587\\u4EF6\"))));\n}","map":null,"metadata":{},"sourceType":"module"}