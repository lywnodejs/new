{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\n\nfunction AssignModal(props) {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(props.visible);\n  const {\n    0: ids,\n    1: setIds\n  } = useState([]);\n  useEffect(() => {\n    setVisible(props.visible);\n\n    if (props.visible) {\n      setLoading(false);\n      setIds([]);\n    }\n  }, [props.visible]);\n\n  const onChange = e => {\n    setIds(e);\n  };\n\n  const onEdit = () => {\n    if (ids.length == 0) {\n      return _message.error('请选择分配对象');\n    }\n\n    let params = {\n      accountIdList: [...ids],\n      accountNameList: [],\n      companyIdList: [1],\n      type: 1\n    };\n    ids.forEach(id => {\n      let item = props.showList.find(item => item.id == id);\n      params.accountNameList.push(item.accountName);\n    });\n    setLoading(true);\n    props.onOk(params, onFail);\n  };\n\n  const onFail = () => {\n    setLoading(false);\n  };\n\n  return __jsx(_Modal, {\n    title: \"\\u9009\\u62E9\\u5206\\u914D\",\n    visible: visible,\n    confirmLoading: loading,\n    onOk: onEdit,\n    onCancel: props.onHide,\n    cancelText: \"\\u53D6\\u6D88\",\n    okText: \"\\u786E\\u5B9A\",\n    width: 600\n  }, __jsx(\"div\", {\n    style: {\n      marginBottom: 20\n    }\n  }, \"\\u9009\\u4E2D\\u6570\\u91CF \", props.showNumber || 0, \" \\u4E2A\\uFF0C\\u8BF7\\u9009\\u62E9\\u5206\\u914D\\u5BF9\\u8C61\"), __jsx(_Row, null, __jsx(_Col, null, \"\\u4EBA\\u5458\\uFF1A\"), __jsx(_Col, null, Array.isArray(props.showList) ? __jsx(_Select, {\n    value: ids,\n    onChange: onChange,\n    mode: \"multiple\",\n    style: {\n      width: 450\n    }\n  }, props.showList.map((v, i) => {\n    return __jsx(_Select.Option, {\n      value: v.id,\n      key: i\n    }, v.accountName, \"_\", v.roleName);\n  })) : null)));\n}\n\nexport default AssignModal;","map":null,"metadata":{},"sourceType":"module"}