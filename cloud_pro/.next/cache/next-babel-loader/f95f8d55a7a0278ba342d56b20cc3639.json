{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport moment from 'moment';\nexport default function SendSms(props) {\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  const [form] = _Form.useForm();\n\n  useEffect(() => {\n    if (visible) {\n      form.resetFields(); // console.log('add history:', props)\n\n      if (props.phoneNo) {\n        form.setFieldsValue({\n          urgeMobilePhone: props.phoneNo\n        });\n      }\n    }\n  }, [visible]);\n\n  const onChangeIsConnect = e => {\n    form.setFieldsValue({\n      urgeResult: '',\n      reasonType: '',\n      repayDesire: '',\n      promiseRepayTime: '',\n      remark: ''\n    });\n  };\n\n  const onChangeRepayDesire = e => {\n    form.setFieldsValue({\n      urgeResult: ''\n    });\n  };\n\n  const successFunc = () => {\n    setLoading(false);\n    setVisible(false);\n  };\n\n  const failFunc = () => {\n    setLoading(false);\n  };\n\n  const handleOk = () => {\n    form.validateFields().then((_ref) => {\n      let {\n        promiseRepayTime\n      } = _ref,\n          values = _objectWithoutProperties(_ref, [\"promiseRepayTime\"]);\n\n      setLoading(true);\n      values.promiseRepayTimeString = promiseRepayTime ? moment(promiseRepayTime).format('YYYY-MM-DD HH:mm:ss') : '';\n      props.getHistoryData(values, successFunc, failFunc);\n    }).catch(errorInfo => {\n      console.error(errorInfo);\n    });\n  };\n\n  const layout = {\n    labelCol: {\n      span: 4\n    },\n    wrapperCol: {\n      span: 16\n    }\n  };\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    onClick: () => setVisible(true)\n  }, props.target ? props.target : __jsx(_Button, {\n    type: props.btnType || 'link'\n  }, \"\\u65B0\\u589E\\u50AC\\u8BB0\")), __jsx(_Modal, {\n    width: 750,\n    title: \"\\u65B0\\u589E\\u50AC\\u6536\\u8BB0\\u5F55\",\n    visible: visible,\n    confirmLoading: loading,\n    onOk: handleOk,\n    onCancel: () => setVisible(false)\n  }, __jsx(_Form, _extends({}, layout, {\n    form: form,\n    name: \"basic\"\n  }), __jsx(_Form.Item, {\n    label: \"\\u50AC\\u6536\\u65B9\\u5F0F\",\n    name: \"collectionMethod\",\n    rules: [{\n      required: true,\n      message: '请选择催收方式!'\n    }]\n  }, __jsx(_Radio.Group, null, props.urgeMethods.map(one => __jsx(_Radio, {\n    value: one.code,\n    key: one.code,\n    style: {\n      marginBottom: 15\n    }\n  }, one.description)))), __jsx(_Form.Item, {\n    label: \"\\u50AC\\u6536\\u5BF9\\u8C61\",\n    name: \"collectionObject\",\n    rules: [{\n      required: true,\n      message: '请选择催收方式!'\n    }]\n  }, __jsx(_Radio.Group, null, props.urgeObjects.map(one => __jsx(_Radio, {\n    value: one.code,\n    key: one.code,\n    style: {\n      marginBottom: 15\n    }\n  }, one.description)))), __jsx(_Form.Item, {\n    label: \"\\u8054\\u7CFB\\u53F7\\u7801\",\n    name: \"urgeMobilePhone\",\n    rules: [{\n      required: true,\n      message: '请输入联系号码!'\n    }, {\n      pattern: /^1[3456789]\\d{9}$/,\n      message: '请输入正确手机号格式!'\n    }]\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\"\n  })), __jsx(_Form.Item, {\n    label: \"\\u662F\\u5426\\u63A5\\u901A\",\n    name: \"isConnect\",\n    rules: [{\n      required: true,\n      message: '请选择是否接通!'\n    }]\n  }, __jsx(_Radio.Group, {\n    onChange: onChangeIsConnect\n  }, props.urgeIsConnects.map(one => __jsx(_Radio, {\n    value: one.code,\n    key: one.code,\n    style: {\n      marginBottom: 15\n    }\n  }, one.description)))), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: (prevValues, currentValues) => prevValues.isConnect !== currentValues.isConnect\n  }, ({\n    getFieldValue\n  }) => {\n    if (getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u903E\\u671F\\u539F\\u56E0\",\n        name: \"reasonType\",\n        rules: [{\n          required: true,\n          message: '请选择逾期原因'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeReasonTypes.map(one => __jsx(_Radio, {\n        value: one.code,\n        key: one.code,\n        style: {\n          marginBottom: 15\n        }\n      }, one.description))));\n    }\n  }), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: (prevValues, currentValues) => prevValues.isConnect !== currentValues.isConnect\n  }, ({\n    getFieldValue\n  }) => {\n    if (getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8FD8\\u6B3E\\u610F\\u613F\",\n        name: \"repayDesire\",\n        rules: [{\n          required: true,\n          message: '请选择还款意愿'\n        }]\n      }, __jsx(_Radio.Group, {\n        onChange: onChangeRepayDesire\n      }, props.urgeRepayDesires.map(one => __jsx(_Radio, {\n        value: one.code,\n        key: one.code,\n        style: {\n          marginBottom: 15\n        }\n      }, one.description))));\n    }\n  }), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: (prevValues, currentValues) => {\n      return prevValues.repayDesire !== currentValues.repayDesire || prevValues.isConnect !== currentValues.isConnect;\n    }\n  }, ({\n    getFieldValue\n  }) => {\n    if ( // getFieldValue('repayDesire') == '1' &&\n    getFieldValue('isConnect') == '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8054\\u7EDC\\u7ED3\\u679C\",\n        name: \"collectionResult\",\n        rules: [{\n          required: true,\n          message: '请选择联络结果'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeResultUnknows.map(one => {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.id,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n\n    if (getFieldValue('repayDesire') == '2' && getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8054\\u7EDC\\u7ED3\\u679C\",\n        name: \"collectionResult\",\n        rules: [{\n          required: true,\n          message: '请选择联络结果'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeResultHighs.map(one => {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.id,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n\n    if (getFieldValue('repayDesire') == '3' && getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8054\\u7EDC\\u7ED3\\u679C\",\n        name: \"collectionResult\",\n        rules: [{\n          required: true,\n          message: '请选择联络结果'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeResultLows.map(one => {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.id,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n  }), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: (prevValues, currentValues) => prevValues.isConnect !== currentValues.isConnect\n  }, ({\n    getFieldValue\n  }) => {\n    if (getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        name: \"promiseRepayTime\",\n        label: \"\\u627F\\u82E5\\u8FD8\\u6B3E\\u65E5\\u671F\"\n      }, __jsx(_DatePicker, {\n        showTime: true,\n        format: \"YYYY-MM-DD HH:mm:ss\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u65E5\\u671F\"\n      }));\n    }\n  }), __jsx(_Form.Item, {\n    label: \"\\u5907\\u6CE8\",\n    name: \"remark\",\n    rules: [{\n      required: true,\n      message: '请输入备注!'\n    }, {\n      min: 6,\n      message: '输入范围大于5字符!'\n    }, {\n      max: 10,\n      message: '输入范围小于等于10字符!'\n    }, {\n      whitespace: true\n    }]\n  }, __jsx(_Input.TextArea, {\n    rows: 4,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u81F3\\u5C115\\u4E2A\\u5B57\\u7B26\"\n  })))));\n}","map":null,"metadata":{},"sourceType":"module"}