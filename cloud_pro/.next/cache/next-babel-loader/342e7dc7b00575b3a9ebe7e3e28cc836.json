{"ast":null,"code":"import \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport api from '~/api/authority';\nimport moment from 'moment';\n\nconst TableList = ({\n  data,\n  onEdit,\n  pageParams,\n  changePageParams\n}) => {\n  const columns = [{\n    title: '姓名',\n    dataIndex: 'accountName'\n  }, {\n    title: '手机号',\n    dataIndex: 'mobile'\n  }, {\n    title: '邮箱账号',\n    dataIndex: 'email'\n  }, {\n    title: '部门',\n    dataIndex: 'departmentName'\n  }, {\n    title: '角色',\n    dataIndex: 'roleName'\n  }, {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    render: t => {\n      return moment(t).format('YYYY-MM-DD HH:mm:ss');\n    }\n  }, {\n    title: '状态',\n    dataIndex: 'status',\n    render: (text, record, index) => {\n      return __jsx(React.Fragment, null, __jsx(_Badge, {\n        status: text ? 'success' : 'error'\n      }), text ? '启用' : '禁用');\n    }\n  }, {\n    title: '操作',\n    dataIndex: 'cz',\n    key: 'cz',\n    width: 250,\n    render: (text, record, index) => {\n      return __jsx(React.Fragment, null, __jsx(_Button, {\n        type: \"link\",\n        onClick: () => onEdit(record)\n      }, \"\\u7F16\\u8F91\"), __jsx(_Button, {\n        type: \"link\",\n        onClick: () => onStatus(record)\n      }, record.status ? '禁用' : '启用'), __jsx(_Button, {\n        type: \"link\",\n        onClick: () => onDelete(record, index)\n      }, \"\\u5220\\u9664\"));\n    }\n  }];\n\n  const onStatus = async record => {\n    _Modal.confirm({\n      content: `确定${record.status ? '禁用' : '启用'}该项账号？`,\n      onOk: async () => {\n        try {\n          const {\n            data\n          } = await api.changeAccountStatus({\n            id: record.id,\n            status: record.status ? 0 : 1\n          });\n\n          if (data.code == 0) {\n            changePageParams();\n\n            _message.success('操作成功');\n          }\n        } catch (errorInfo) {\n          console.log('Failed:', errorInfo);\n        }\n      }\n    });\n  };\n\n  const onDelete = async record => {\n    _Modal.confirm({\n      content: '确定删除该项数据？',\n      onOk: async () => {\n        try {\n          const {\n            data\n          } = await api.deleteAccount(record.id);\n\n          if (data.code == 0) {\n            changePageParams();\n\n            _message.success('删除成功');\n          }\n        } catch (errorInfo) {\n          console.log('Failed:', errorInfo);\n        }\n      }\n    });\n  };\n\n  const onShowSizeChange = (current, pageSize) => {\n    changePageParams(1, pageSize);\n  };\n\n  const pagination = {\n    defaultCurrent: 1,\n    total: data.total,\n    pageSize: pageParams.pageSize || 20,\n    showQuickJumper: true,\n    showSizeChanger: true,\n    onShowSizeChange: onShowSizeChange,\n    current: pageParams.pageNo || 0,\n    showTotal: total => {\n      return `共 ${total} 条记录`;\n    },\n    onChange: pageNumber => {\n      changePageParams(pageNumber);\n    }\n  };\n  return __jsx(_Table, {\n    rowKey: \"id\",\n    dataSource: data.list,\n    columns: columns,\n    bordered: true,\n    pagination: pagination\n  });\n};\n\nexport default TableList;","map":null,"metadata":{},"sourceType":"module"}