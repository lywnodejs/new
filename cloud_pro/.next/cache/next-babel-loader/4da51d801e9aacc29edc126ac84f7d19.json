{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/checkbox/style\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport \"antd/lib/input-number/style\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar __jsx = React.createElement;\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect } from 'react';\nexport default function (props) {\n  const [form] = _Form.useForm();\n\n  useEffect(() => {\n    form.resetFields();\n\n    if (props.data) {\n      console.log(props.data);\n      const {\n        productReview\n      } = props.data;\n\n      let prams = _objectSpread(_objectSpread({}, props.data), {}, {\n        productReviewSwitch: props.data.productReviewSwitch == 1,\n        productReviewData: productReview ? productReview.split('/') : [],\n        productUnsetReviewSwitch: props.data.productUnsetReviewSwitch == 1\n      });\n\n      form.setFieldsValue(prams);\n    }\n  }, [props.productId, props.data]);\n\n  const saveSetting = () => {\n    form.validateFields().then(values => {\n      let {\n        productReviewSwitch,\n        productReviewData,\n        productUnsetReviewSwitch\n      } = values,\n          params = _objectWithoutProperties(values, [\"productReviewSwitch\", \"productReviewData\", \"productUnsetReviewSwitch\"]);\n\n      params.productReviewSwitch = productReviewSwitch ? 1 : 0;\n      params.productUnsetReviewSwitch = productUnsetReviewSwitch ? 1 : 0;\n      params.productReview = productReviewData.join('/');\n      props.saveSetting(params);\n    }).catch(errorInfo => {\n      console.error(errorInfo);\n    });\n  };\n\n  const style = {\n    display: 'inline-block',\n    marginBottom: 0,\n    verticalAlign: 'initial'\n  };\n  return __jsx(_Form, {\n    form: form\n  }, __jsx(_Form.Item, {\n    name: \"productReviewSwitch\",\n    valuePropName: \"checked\"\n  }, __jsx(_Checkbox, null, __jsx(_Form.Item, {\n    noStyle: true\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: 'bold',\n      marginRight: 15\n    }\n  }, \"\\u5468\\u671F\\u68C0\\u67E5:\"), __jsx(\"span\", null, \"\\u653E\\u6B3E\\u540E\\u7B2C\\u2003\"), __jsx(_Form.Item, {\n    style: style,\n    rules: [({\n      getFieldValue\n    }) => ({\n      validator(rule, value) {\n        const isChecked = getFieldValue('productReviewSwitch');\n\n        if (isChecked && !value) {\n          return Promise.reject('请输入');\n        }\n\n        return Promise.resolve();\n      }\n\n    })],\n    name: ['productReviewData', 0]\n  }, __jsx(_InputNumber, {\n    min: 0,\n    precision: 0\n  })), __jsx(\"span\", null, \"\\u2003\\u5929\\u5F00\\u59CB,\\u2003\"), __jsx(_Form.Item, {\n    style: style,\n    rules: [({\n      getFieldValue\n    }) => ({\n      validator(rule, value) {\n        const isChecked = getFieldValue('productReviewSwitch');\n\n        if (isChecked && !value) {\n          return Promise.reject('请输入');\n        }\n\n        return Promise.resolve();\n      }\n\n    })],\n    name: ['productReviewData', 1]\n  }, __jsx(_InputNumber, {\n    min: 0,\n    precision: 0\n  })), __jsx(\"span\", null, \"\\u2003\\u5929\\u4E00\\u6B21\\uFF0C\\u5171\\u2003\"), __jsx(_Form.Item, {\n    rules: [({\n      getFieldValue\n    }) => ({\n      validator(rule, value) {\n        const isChecked = getFieldValue('productReviewSwitch');\n\n        if (isChecked && !value) {\n          return Promise.reject('请输入');\n        }\n\n        return Promise.resolve();\n      }\n\n    })],\n    style: style,\n    name: ['productReviewData', 2]\n  }, __jsx(_InputNumber, {\n    min: 0,\n    precision: 0\n  })), __jsx(\"span\", null, \"\\u2003\\u6B21\\u3002\")))), __jsx(_Form.Item, {\n    name: \"productUnsetReviewSwitch\",\n    valuePropName: \"checked\"\n  }, __jsx(_Checkbox, null, __jsx(_Form.Item, {\n    noStyle: true\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: 'bold',\n      marginRight: 15\n    }\n  }, \"\\u975E\\u56FA\\u5B9A\\u68C0\\u67E5:\"), __jsx(\"span\", null, \"\\u653E\\u6B3E\\u540E\\u7B2C\\u2003\"), __jsx(_Form.Item, {\n    style: style,\n    rules: [// {required: true, message: '请输入贷款期限'},\n    ({\n      getFieldValue\n    }) => ({\n      validator(rule, value) {\n        const isChecked = getFieldValue('productUnsetReviewSwitch');\n\n        if (isChecked && !value) {\n          return Promise.reject('请输入');\n        }\n\n        if (!value) {\n          return Promise.resolve();\n        }\n\n        const arr = value.split('/').filter(v => !!v);\n        const reg = /(^[1-9]\\d*$)/;\n        const isTrue = arr.every(v => reg.test(v));\n\n        if (!isTrue) {\n          return Promise.reject('请输入正确的天数，必须是正整数');\n        }\n\n        return Promise.resolve();\n      }\n\n    })],\n    name: \"productUnsetReview\"\n  }, __jsx(_Input, {\n    style: {\n      width: 280\n    },\n    placeholder: \"\\u591A\\u4E2A\\u503C\\u7528\\u201C/\\u201D \\u9694\\u5F00\\uFF0C\\u5982\\u201C15/30/60\\u201D\"\n  })), __jsx(\"span\", null, \"\\u2003\\u5929\\u3002\\u2003\")))), __jsx(_Form.Item, null, __jsx(_Button, {\n    type: \"primary\",\n    onClick: saveSetting\n  }, \"\\u4FDD\\u5B58\")));\n}","map":null,"metadata":{},"sourceType":"module"}