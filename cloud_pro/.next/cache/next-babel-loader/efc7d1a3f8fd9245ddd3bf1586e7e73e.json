{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/tabs/style\";\nimport _Tabs from \"antd/lib/tabs\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Layout } from '~/components/Layout';\nimport React, { useEffect, useState } from 'react';\nimport { useCookies } from 'react-cookie';\nimport api from '~/api/creditScore';\nimport SearchForm from './personal/SearchForm';\nimport TableList from './personal/TableList';\nimport ComSearchForm from './community/comSearchForm';\nimport ComTableList from './community/comTableList';\nimport TownSearchForm from './streetTown/TownSearchForm';\nimport TownTableList from './streetTown/TownTableList';\nvar TabPane = _Tabs.TabPane;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nvar breadcrumbs = [{\n  text: '乡村振兴'\n}, {\n  text: '信用分查询'\n}];\nvar pageParams = {\n  pageNum: 1,\n  pageSize: 20\n};\nvar values = {};\n\nfunction body(props) {\n  _s();\n\n  var _useCookies = useCookies(['tenantId']),\n      _useCookies2 = _slicedToArray(_useCookies, 1),\n      cookies = _useCookies2[0]; //个人\n\n\n  var _useState = useState([]),\n      list = _useState[0],\n      setList = _useState[1];\n\n  var _useState2 = useState([]),\n      totalData = _useState2[0],\n      setTotalData = _useState2[1];\n\n  var _useState3 = useState([]),\n      productList = _useState3[0],\n      setProductList = _useState3[1];\n\n  var _useState4 = useState([]),\n      applyStatusList = _useState4[0],\n      setApplyStatusList = _useState4[1]; //村.社区\n\n\n  var _useState5 = useState([]),\n      listit = _useState5[0],\n      setListit = _useState5[1];\n\n  var _useState6 = useState([]),\n      talData = _useState6[0],\n      setTalData = _useState6[1]; //街道.乡道\n\n\n  var _useState7 = useState([]),\n      tolist = _useState7[0],\n      setTolist = _useState7[1];\n\n  var _useState8 = useState([]),\n      gotalData = _useState8[0],\n      setGotalData = _useState8[1]; //信用等级\n\n\n  var _useState9 = useState([]),\n      gradeList = _useState9[0],\n      setGrade = _useState9[1];\n\n  useEffect(function () {\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fetchList();\n                onSearch();\n                onQuery();\n                onWhole();\n                fetchCredit();\n                fetchListItem();\n                fetchGrade();\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, []); //个人\n\n  var fetchList = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var values,\n          _yield$api$fetch_base,\n          _yield$api$fetch_base2,\n          data,\n          code,\n          _args2 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              values = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n              _context2.prev = 1;\n              values.creditLevel = values.creditLevel || null;\n              values.streetCode = values.streetCode || null;\n              values.villageCode = values.villageCode || null;\n              _context2.next = 7;\n              return api.fetch_base_list(_objectSpread(_objectSpread({}, pageParams), values));\n\n            case 7:\n              _yield$api$fetch_base = _context2.sent;\n              _yield$api$fetch_base2 = _yield$api$fetch_base.data;\n              data = _yield$api$fetch_base2.data;\n              code = _yield$api$fetch_base2.code;\n\n              if (code === 0 && data) {\n                data.list.forEach(function (item) {\n                  item.name = item.name || '-';\n                  item.idCard = item.idCard || '-';\n                  item.mobilePhone = item.mobilePhone || '-';\n                  item.creditScore = item.creditScore || '-';\n                  item.creditLevel = item.creditLevel || '-';\n                  item.streetName = item.streetName || '-';\n                  item.villageName = item.villageName || '-';\n                });\n                setList(data.list);\n                setTotalData(data);\n                console.log(data);\n              }\n\n              _context2.next = 17;\n              break;\n\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 14]]);\n    }));\n\n    return function fetchList() {\n      return _ref.apply(this, arguments);\n    };\n  }(); //村.社区\n\n\n  var fetchCredit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var values,\n          _yield$api$fetch_comm,\n          _yield$api$fetch_comm2,\n          data,\n          code,\n          _args3 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              values = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {};\n              _context3.prev = 1;\n              _context3.next = 4;\n              return api.fetch_communityCredit_list(_objectSpread(_objectSpread({}, pageParams), values));\n\n            case 4:\n              _yield$api$fetch_comm = _context3.sent;\n              _yield$api$fetch_comm2 = _yield$api$fetch_comm.data;\n              data = _yield$api$fetch_comm2.data;\n              code = _yield$api$fetch_comm2.code;\n\n              if (code === 0 && data) {\n                data.list.forEach(function (item) {\n                  item.name = item.name || '-';\n                  item.streetName = item.streetName || '-';\n                  item.creditScore = item.creditScore || '-';\n                  item.creditLevel = item.creditLevel || '-';\n                });\n                setListit(data.list);\n                setTalData(data);\n              }\n\n              _context3.next = 14;\n              break;\n\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(_context3.t0);\n\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 11]]);\n    }));\n\n    return function fetchCredit() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); //街道.乡道\n\n\n  var fetchListItem = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var values,\n          _yield$api$fetch_stre,\n          _yield$api$fetch_stre2,\n          data,\n          code,\n          _args4 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              values = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {};\n              _context4.prev = 1;\n              _context4.next = 4;\n              return api.fetch_streetCredit_list(_objectSpread(_objectSpread({}, pageParams), values));\n\n            case 4:\n              _yield$api$fetch_stre = _context4.sent;\n              _yield$api$fetch_stre2 = _yield$api$fetch_stre.data;\n              data = _yield$api$fetch_stre2.data;\n              code = _yield$api$fetch_stre2.code;\n\n              if (code === 0 && data) {\n                data.list.forEach(function (item) {\n                  item.name = item.name || '-';\n                  item.creditScore = item.creditScore || '-';\n                  item.creditLevel = item.creditLevel || '-';\n                });\n                setTolist(data.list);\n                setGotalData(data);\n              }\n\n              _context4.next = 14;\n              break;\n\n            case 11:\n              _context4.prev = 11;\n              _context4.t0 = _context4[\"catch\"](1);\n              console.log(_context4.t0);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 11]]);\n    }));\n\n    return function fetchListItem() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); //信用等级\n\n\n  var fetchGrade = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var _yield$api$fetch_grad, _yield$api$fetch_grad2, code, data;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return api.fetch_grade_list({});\n\n            case 3:\n              _yield$api$fetch_grad = _context5.sent;\n              _yield$api$fetch_grad2 = _yield$api$fetch_grad.data;\n              code = _yield$api$fetch_grad2.code;\n              data = _yield$api$fetch_grad2.data;\n\n              if (code == 0) {\n                setGrade(data);\n              }\n\n              _context5.next = 13;\n              break;\n\n            case 10:\n              _context5.prev = 10;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.log(_context5.t0);\n\n            case 13:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 10]]);\n    }));\n\n    return function fetchGrade() {\n      return _ref4.apply(this, arguments);\n    };\n  }(); //个人\n\n\n  var onSearch = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(value) {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              values = value;\n              pageParams.pageNum = 1;\n              fetchList(_objectSpread({}, values));\n\n            case 3:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function onSearch(_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }(); //村、社区\n\n\n  var onQuery = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(value) {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              values = value;\n              pageParams.pageNum = 1;\n              fetchCredit(_objectSpread({}, values));\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function onQuery(_x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }(); //街道、乡镇\n\n\n  var onWhole = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(value) {\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              values = value;\n              pageParams.pageNum = 1;\n              fetchListItem(_objectSpread({}, values));\n\n            case 3:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function onWhole(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var onPage = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              fetchList(values);\n              fetchCredit(values);\n              fetchListItem(values);\n\n            case 3:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function onPage() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, {\n    breadcrumbs: breadcrumbs\n  }, __jsx(_Tabs, {\n    defaultActiveKey: \"1\",\n    onChange: callback\n  }, __jsx(TabPane, {\n    tab: \"\\u4E2A\\u4EBA\",\n    key: \"1\"\n  }, __jsx(SearchForm, {\n    onSearch: onSearch,\n    values: values,\n    productList: productList,\n    applyStatusList: applyStatusList,\n    gradeList: gradeList\n  }), __jsx(TableList, {\n    list: list,\n    setList: setList,\n    pageParams: pageParams,\n    totalData: totalData,\n    onPage: onPage\n  })), __jsx(TabPane, {\n    tab: \"\\u6751/\\u793E\\u533A\",\n    key: \"2\"\n  }, __jsx(ComSearchForm, {\n    onQuery: onQuery,\n    gradeList: gradeList\n  }), __jsx(ComTableList, {\n    listit: listit,\n    setListit: setListit,\n    pageParams: pageParams,\n    talData: talData,\n    onPage: onPage\n  })), __jsx(TabPane, {\n    tab: \"\\u8857\\u9053/\\u4E61\\u9547\",\n    key: \"3\"\n  }, __jsx(TownSearchForm, {\n    onWhole: onWhole,\n    gradeList: gradeList\n  }), __jsx(TownTableList, {\n    tolist: tolist,\n    setTolist: setTolist,\n    gotalData: gotalData,\n    pageParams: pageParams,\n    onPage: onPage\n  }))));\n}\n\n_s(body, \"DTn8wz95bpdChhBRQvckNFIkQX4=\", false, function () {\n  return [useCookies];\n});\n\nbody.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n  return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          return _context10.abrupt(\"return\", {});\n\n        case 1:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _callee10);\n}));\nexport default body;","map":{"version":3,"sources":["/Users/liuyawei/Desktop/信用算力/项目/cloud_pro/pages/vitalization/creditScore/index.js"],"names":["Layout","React","useEffect","useState","useCookies","api","SearchForm","TableList","ComSearchForm","ComTableList","TownSearchForm","TownTableList","TabPane","callback","key","console","log","breadcrumbs","text","pageParams","pageNum","pageSize","values","body","props","cookies","list","setList","totalData","setTotalData","productList","setProductList","applyStatusList","setApplyStatusList","listit","setListit","talData","setTalData","tolist","setTolist","gotalData","setGotalData","gradeList","setGrade","fetchData","fetchList","onSearch","onQuery","onWhole","fetchCredit","fetchListItem","fetchGrade","creditLevel","streetCode","villageCode","fetch_base_list","data","code","forEach","item","name","idCard","mobilePhone","creditScore","streetName","villageName","fetch_communityCredit_list","fetch_streetCredit_list","fetch_grade_list","value","onPage","getInitialProps"],"mappings":"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","sourcesContent":["import {Layout} from '~/components/Layout'\nimport React, {useEffect, useState} from 'react'\nimport {useCookies} from 'react-cookie'\nimport api from '~/api/creditScore'\nimport {Tabs} from 'antd'\nimport SearchForm from './personal/SearchForm'\nimport TableList from './personal/TableList'\nimport ComSearchForm from './community/comSearchForm'\nimport ComTableList from './community/comTableList'\nimport TownSearchForm from './streetTown/TownSearchForm'\nimport TownTableList from './streetTown/TownTableList'\n\nconst {TabPane} = Tabs\n\nfunction callback(key) {\n  console.log(key)\n}\nconst breadcrumbs = [{text: '乡村振兴'}, {text: '信用分查询'}]\nconst pageParams = {\n  pageNum: 1,\n  pageSize: 20,\n}\nlet values = {}\nfunction body(props) {\n  const [cookies] = useCookies(['tenantId'])\n  //个人\n  const [list, setList] = useState([])\n  const [totalData, setTotalData] = useState([])\n  const [productList, setProductList] = useState([])\n  const [applyStatusList, setApplyStatusList] = useState([])\n  //村.社区\n  const [listit, setListit] = useState([])\n  const [talData, setTalData] = useState([])\n  //街道.乡道\n  const [tolist, setTolist] = useState([])\n  const [gotalData, setGotalData] = useState([])\n\n  //信用等级\n  const [gradeList, setGrade] = useState([])\n  useEffect(() => {\n    async function fetchData() {\n      fetchList()\n      onSearch()\n      onQuery()\n      onWhole()\n      fetchCredit()\n      fetchListItem()\n      fetchGrade()\n    }\n    fetchData()\n  }, [])\n  //个人\n  const fetchList = async (values = {}) => {\n    try {\n      values.creditLevel = values.creditLevel || null\n      values.streetCode = values.streetCode || null\n      values.villageCode = values.villageCode || null\n      const {\n        data: {data, code},\n      } = await api.fetch_base_list({...pageParams, ...values})\n      if (code === 0 && data) {\n        data.list.forEach((item) => {\n          item.name = item.name || '-'\n          item.idCard = item.idCard || '-'\n          item.mobilePhone = item.mobilePhone || '-'\n          item.creditScore = item.creditScore || '-'\n          item.creditLevel = item.creditLevel || '-'\n          item.streetName = item.streetName || '-'\n          item.villageName = item.villageName || '-'\n        })\n        setList(data.list)\n        setTotalData(data)\n        console.log(data)\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }\n  //村.社区\n  const fetchCredit = async (values = {}) => {\n    try {\n      const {\n        data: {data, code},\n      } = await api.fetch_communityCredit_list({...pageParams, ...values})\n      if (code === 0 && data) {\n        data.list.forEach((item) => {\n          item.name = item.name || '-'\n          item.streetName = item.streetName || '-'\n          item.creditScore = item.creditScore || '-'\n          item.creditLevel = item.creditLevel || '-'\n        })\n        setListit(data.list)\n        setTalData(data)\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }\n  //街道.乡道\n  const fetchListItem = async (values = {}) => {\n    try {\n      const {\n        data: {data, code},\n      } = await api.fetch_streetCredit_list({\n        ...pageParams,\n        ...values,\n      })\n      if (code === 0 && data) {\n        data.list.forEach((item) => {\n          item.name = item.name || '-'\n          item.creditScore = item.creditScore || '-'\n          item.creditLevel = item.creditLevel || '-'\n        })\n        setTolist(data.list)\n        setGotalData(data)\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  //信用等级\n  const fetchGrade = async () => {\n    try {\n      const {\n        data: {code, data},\n      } = await api.fetch_grade_list({})\n      if (code == 0) {\n        setGrade(data)\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }\n  //个人\n  const onSearch = async (value) => {\n    values = value\n    pageParams.pageNum = 1\n    fetchList({...values})\n  }\n  //村、社区\n  const onQuery = async (value) => {\n    values = value\n    pageParams.pageNum = 1\n    fetchCredit({...values})\n  }\n  //街道、乡镇\n  const onWhole = async (value) => {\n    values = value\n    pageParams.pageNum = 1\n    fetchListItem({...values})\n  }\n  const onPage = async () => {\n    fetchList(values)\n    fetchCredit(values)\n    fetchListItem(values)\n  }\n  return (\n    <Layout breadcrumbs={breadcrumbs}>\n      <Tabs defaultActiveKey=\"1\" onChange={callback}>\n        <TabPane tab=\"个人\" key=\"1\">\n          <SearchForm\n            {...{\n              onSearch,\n              values,\n              productList,\n              applyStatusList,\n              gradeList,\n            }}\n          />\n          <TableList\n            {...{\n              list,\n              setList,\n              pageParams,\n              totalData,\n              onPage,\n            }}\n          />\n        </TabPane>\n        <TabPane tab=\"村/社区\" key=\"2\">\n          <ComSearchForm\n            {...{\n              onQuery,\n              gradeList,\n            }}\n          />\n          <ComTableList\n            {...{\n              listit,\n              setListit,\n              pageParams,\n              talData,\n              onPage,\n            }}\n          />\n        </TabPane>\n        <TabPane tab=\"街道/乡镇\" key=\"3\">\n          <TownSearchForm\n            {...{\n              onWhole,\n              gradeList,\n            }}\n          />\n          <TownTableList\n            {...{\n              tolist,\n              setTolist,\n              gotalData,\n              pageParams,\n              onPage,\n            }}\n          />\n        </TabPane>\n      </Tabs>\n    </Layout>\n  )\n}\n\nbody.getInitialProps = async () => {\n  return {}\n}\n\nexport default body\n"]},"metadata":{},"sourceType":"module"}