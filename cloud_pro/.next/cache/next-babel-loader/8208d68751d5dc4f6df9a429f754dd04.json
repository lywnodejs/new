{"ast":null,"code":"import \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar __jsx = React.createElement;\nimport { Layout } from '~/components/Layout';\nimport React, { useEffect, useState } from 'react';\nimport { InfoCircleTwoTone } from '@ant-design/icons';\nimport apiReview from '~/api/review';\n\nconst TableList = ({\n  list,\n  onSearch,\n  productId,\n  personnelList\n}) => {\n  const [form] = _Form.useForm();\n\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: rowsData,\n    1: setRowsData\n  } = useState([]);\n  const columns = [{\n    title: '委案人员姓名',\n    dataIndex: 'accountName',\n    key: 'accountName',\n    width: 180\n  }, {\n    title: '分案级别',\n    dataIndex: 'roleName',\n    key: 'roleName',\n    width: 180\n  }, {\n    title: '状态',\n    dataIndex: 'isOnLine',\n    key: 'isOnLine',\n    width: 180,\n    render: text => {\n      return __jsx(React.Fragment, null, __jsx(_Badge, {\n        status: text == 1 ? 'success' : 'error'\n      }), text == 1 ? '在岗' : '离岗');\n    }\n  }, {\n    title: '操作',\n    dataIndex: 'CZ',\n    key: 'CZ',\n    width: 180,\n    render: (record, row) => {\n      if (row.isOnLine == 1) {\n        return __jsx(\"a\", {\n          onClick: () => demobilized(row)\n        }, \"\\u79BB\\u5C97\");\n      } else {\n        return __jsx(\"a\", {\n          onClick: () => demobilized(row)\n        }, \"\\u5728\\u5C97\");\n      }\n    }\n  }];\n\n  const demobilized = row => {\n    setVisible(true);\n    setRowsData(row);\n  };\n\n  const reset = () => {\n    form.resetFields();\n    onSearch();\n  };\n\n  const handleOk = async () => {\n    try {\n      const {\n        data: {\n          data,\n          code\n        }\n      } = await apiReview.fetch_updateStatus_list({\n        productId,\n        accountId: rowsData.id,\n        accountStatus: rowsData.isOnLine == 1 ? 2 : 1\n      });\n\n      if (code == 0) {\n        _message.success('人员状态切换成功');\n\n        setVisible(false);\n        personnelList({\n          productId: productId\n        });\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(Layout, null, __jsx(_Card, null, __jsx(\"div\", null, __jsx(_Form, {\n    form: form,\n    onFinish: values => {\n      onSearch(values);\n    },\n    layout: \"inline\",\n    className: \"searchForm\",\n    initialValues: {}\n  }, __jsx(_Form.Item, {\n    label: \"\\u59D4\\u6848\\u4EBA\\u5458\\u59D3\\u540D\",\n    name: \"accountName\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\"\n  })), __jsx(_Button, {\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"\\u67E5\\u8BE2\"), __jsx(_Button, {\n    style: {\n      marginLeft: 15\n    },\n    onClick: reset\n  }, \"\\u91CD\\u7F6E\"))), __jsx(_Table, {\n    style: {\n      marginTop: 20\n    },\n    rowKey: \"id\",\n    columns: columns,\n    dataSource: list,\n    bordered: true,\n    scroll: {\n      y: '100%',\n      x: '100%'\n    }\n  }), __jsx(_Modal, {\n    visible: visible,\n    onOk: handleOk,\n    onCancel: () => setVisible(false),\n    okText: \"\\u786E\\u8BA4\",\n    cancelText: \"\\u53D6\\u6D88\"\n  }, __jsx(\"p\", null, __jsx(InfoCircleTwoTone, null), \" \\xA0\\xA0 \\u5207\\u6362\", __jsx(\"span\", {\n    style: {\n      color: '#1890ff',\n      fontWeight: 'bold'\n    }\n  }, ' ', \"\\xA0\", `${rowsData.accountName}`, \"\\xA0\"), \"\\u72B6\\u6001\\u4ECE\", __jsx(\"span\", {\n    style: {\n      color: '#e65a6b'\n    }\n  }, \"\\xA0\", `${rowsData.isOnLine == 1 ? '在岗' : '离岗'}`, \"\\xA0\"), \"\\u53D8\\u66F4\\u4E3A\", __jsx(\"span\", {\n    style: {\n      color: '#e65a6b'\n    }\n  }, \"\\xA0\", `${rowsData.isOnLine == 1 ? '离岗' : '在岗'}`, \"\\xA0,\"), \"\\u786E\\u8BA4\\u8FD9\\u4E2A\\u64CD\\u4F5C\\u5417\\uFF1F\"))));\n};\n\nexport default TableList;","map":null,"metadata":{},"sourceType":"module"}