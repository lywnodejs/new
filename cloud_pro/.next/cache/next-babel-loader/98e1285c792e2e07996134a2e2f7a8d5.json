{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/breadcrumb/style\";\nimport _Breadcrumb from \"antd/lib/breadcrumb\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nimport \"antd/lib/tabs/style\";\nimport _Tabs from \"antd/lib/tabs\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect } from 'react';\nimport Router from 'next/router';\nimport nextId from 'react-id-generator';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport Sider from './Sider';\nimport { useContext, useState } from 'react';\nimport { Context } from '~/pages/_app';\nimport Header from './Header';\nimport styles from './Layout.less';\nimport NextNProgress from '../NextNProgress';\nvar TabPane = _Tabs.TabPane;\nvar Content = _Layout.Content;\nexport var TabContext = React.createContext();\nvar newTabIndex = 1;\n\nvar useTabs = function useTabs(children) {\n  _s();\n\n  var _useState = useState(0),\n      activeKey = _useState[0],\n      setActiveKey = _useState[1];\n\n  var _useState2 = useState([{\n    title: 'main',\n    content: children,\n    key: 0\n  }]),\n      panes = _useState2[0],\n      setPanes = _useState2[1];\n\n  useEffect(function () {\n    setPanes([{\n      title: 'main',\n      content: children,\n      key: 0\n    }]);\n    setActiveKey(0);\n  }, [children]);\n  var actions = {\n    push: function push(content) {\n      var key = newTabIndex++;\n      setPanes([].concat(_toConsumableArray(panes), [{\n        title: 'child',\n        content: content,\n        key: key\n      }]));\n      setActiveKey(key);\n    },\n    pop: function pop() {\n      if (panes.length === 1) return;\n      setPanes(_toConsumableArray(panes.slice(0, panes.length - 1)));\n      setActiveKey(panes[0].key);\n    }\n  };\n  return [panes, activeKey, actions];\n};\n\n_s(useTabs, \"ChL2Ro8yC60Qzxv8UKFVmrWmp2Y=\");\n\nexport var CommonLayout = function CommonLayout(props) {\n  _s2();\n\n  var breadcrumbs = props.breadcrumbs;\n\n  var _useState3 = useState(false),\n      collapsed = _useState3[0],\n      setCollapsed = _useState3[1];\n\n  var _useTabs = useTabs(props.children),\n      _useTabs2 = _slicedToArray(_useTabs, 3),\n      panes = _useTabs2[0],\n      activeKey = _useTabs2[1],\n      actions = _useTabs2[2];\n\n  var onCollapseChange = function onCollapseChange(collapsed) {\n    setCollapsed(collapsed);\n  };\n\n  return __jsx(_Layout, {\n    style: {\n      background: '#FFFFFF'\n    }\n  }, __jsx(NextNProgress, null), __jsx(Header, {\n    fixed: true\n    /* collapsed={collapsed} */\n    ,\n    onCollapseChange: onCollapseChange\n  }), __jsx(_Layout, null, __jsx(Sider, {\n    collapsed: collapsed\n  }), __jsx(\"div\", {\n    className: styles.wrap\n  }, __jsx(TabContext.Provider, {\n    value: actions\n  }, __jsx(_Tabs, {\n    renderTabBar: function renderTabBar() {\n      return __jsx(\"div\", null);\n    },\n    activeKey: activeKey + ''\n  }, panes.map(function (pane) {\n    return __jsx(TabPane, {\n      tab: pane.title,\n      key: pane.key\n    }, __jsx(\"div\", {\n      className: styles.container,\n      id: \"primaryLayout\"\n    }, React.cloneElement(pane.content, _objectSpread({\n      activeKey: activeKey,\n      isFocus: activeKey === 0\n    }, actions))));\n  }))))));\n};\n\n_s2(CommonLayout, \"uV3brodZmrv+RIzOvS/28/O6saA=\", false, function () {\n  return [useTabs];\n});\n\n_c = CommonLayout;\n\nvar body = function body(props) {\n  _s3();\n\n  var breadcrumbs = props.breadcrumbs,\n      extra = props.extra,\n      _props$hideTitle = props.hideTitle,\n      hideTitle = _props$hideTitle === void 0 ? false : _props$hideTitle;\n  var router = useRouter();\n\n  var onBack = function onBack() {\n    router.back();\n  };\n\n  return __jsx(Content, {\n    style: props.style,\n    className: styles.content\n  }, breadcrumbs && __jsx(_Breadcrumb, {\n    style: {\n      marginBottom: '17px'\n    }\n  }, breadcrumbs.map(function (breadcrumb, index) {\n    return __jsx(_Breadcrumb.Item, {\n      key: index\n    }, breadcrumb.path ? __jsx(Link, {\n      href: {\n        pathname: breadcrumb.path\n      }\n    }, __jsx(\"a\", {\n      style: {\n        color: '#333'\n      }\n    }, breadcrumb.text)) : breadcrumb.text);\n  })), __jsx(\"div\", {\n    className: styles.titleBar\n  }, __jsx(\"h1\", null, Array.isArray(breadcrumbs) && !hideTitle && breadcrumbs[breadcrumbs.length - 1].text), extra ? extra : Array.isArray(breadcrumbs) && breadcrumbs.length >= 3 && breadcrumbs[breadcrumbs.length - 2].path && __jsx(_Button, {\n    onClick: onBack\n  }, \"\\u8FD4\\u56DE\\u4E0A\\u4E00\\u9875\")), props.children);\n};\n\n_s3(body, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});\n\nexport default body;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommonLayout\");","map":{"version":3,"sources":["/Users/liuyawei/Desktop/信用算力/项目/cloud_pro/components/Layout/Layout.js"],"names":["React","useEffect","Router","nextId","Link","useRouter","Sider","useContext","useState","Context","Header","styles","NextNProgress","TabPane","Content","TabContext","createContext","newTabIndex","useTabs","children","activeKey","setActiveKey","title","content","key","panes","setPanes","actions","push","pop","length","slice","CommonLayout","props","breadcrumbs","collapsed","setCollapsed","onCollapseChange","background","wrap","map","pane","container","cloneElement","isFocus","body","extra","hideTitle","router","onBack","back","style","marginBottom","breadcrumb","index","path","pathname","color","text","titleBar","Array","isArray"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\nimport Router from 'next/router'\nimport nextId from 'react-id-generator'\nimport Link from 'next/link'\nimport {Layout, Menu, Dropdown, Breadcrumb, Button, Tabs} from 'antd'\nimport {useRouter} from 'next/router'\nimport Sider from './Sider'\nimport {useContext, useState} from 'react'\nimport {Context} from '~/pages/_app'\nimport Header from './Header'\nimport styles from './Layout.less'\nimport NextNProgress from '../NextNProgress'\nconst {TabPane} = Tabs\nconst {Content} = Layout\n\nexport const TabContext = React.createContext()\n\nlet newTabIndex = 1\nconst useTabs = (children) => {\n  const [activeKey, setActiveKey] = useState(0)\n  const [panes, setPanes] = useState([\n    {title: 'main', content: children, key: 0},\n  ])\n\n  useEffect(() => {\n    setPanes([{title: 'main', content: children, key: 0}])\n    setActiveKey(0)\n  }, [children])\n\n  const actions = {\n    push(content) {\n      const key = newTabIndex++\n      setPanes([...panes, {title: 'child', content, key}])\n      setActiveKey(key)\n    },\n    pop() {\n      if (panes.length === 1) return\n      setPanes([...panes.slice(0, panes.length - 1)])\n      setActiveKey(panes[0].key)\n    },\n  }\n  return [panes, activeKey, actions]\n}\n\nexport const CommonLayout = (props) => {\n  const {breadcrumbs} = props\n  const [collapsed, setCollapsed] = useState(false)\n  const [panes, activeKey, actions] = useTabs(props.children)\n\n  const onCollapseChange = (collapsed) => {\n    setCollapsed(collapsed)\n  }\n\n  return (\n    <Layout style={{background: '#FFFFFF'}}>\n      <NextNProgress />\n      <Header\n        fixed={true}\n        /* collapsed={collapsed} */\n        onCollapseChange={onCollapseChange}\n      />\n      <Layout>\n        <Sider collapsed={collapsed} />\n        <div className={styles.wrap}>\n          <TabContext.Provider value={actions}>\n            <Tabs renderTabBar={() => <div />} activeKey={activeKey + ''}>\n              {panes.map((pane) => (\n                <TabPane tab={pane.title} key={pane.key}>\n                  <div className={styles.container} id=\"primaryLayout\">\n                    {React.cloneElement(pane.content, {\n                      activeKey,\n                      isFocus: activeKey === 0,\n                      ...actions,\n                    })}\n                  </div>\n                </TabPane>\n              ))}\n            </Tabs>\n          </TabContext.Provider>\n        </div>\n      </Layout>\n    </Layout>\n  )\n}\n\nconst body = (props) => {\n  const {breadcrumbs, extra, hideTitle = false} = props\n  const router = useRouter()\n\n  const onBack = () => {\n    router.back()\n  }\n\n  return (\n    <Content style={props.style} className={styles.content}>\n      {breadcrumbs && (\n        <Breadcrumb style={{marginBottom: '17px'}}>\n          {breadcrumbs.map((breadcrumb, index) => (\n            <Breadcrumb.Item key={index}>\n              {breadcrumb.path ? (\n                <Link href={{pathname: breadcrumb.path}}>\n                  <a style={{color: '#333'}}>{breadcrumb.text}</a>\n                </Link>\n              ) : (\n                breadcrumb.text\n              )}\n            </Breadcrumb.Item>\n          ))}\n        </Breadcrumb>\n      )}\n      <div className={styles.titleBar}>\n        <h1>\n          {Array.isArray(breadcrumbs) &&\n            !hideTitle &&\n            breadcrumbs[breadcrumbs.length - 1].text}\n        </h1>\n        {extra\n          ? extra\n          : Array.isArray(breadcrumbs) &&\n            breadcrumbs.length >= 3 &&\n            breadcrumbs[breadcrumbs.length - 2].path && (\n              <Button onClick={onBack}>返回上一页</Button>\n            )}\n      </div>\n      {props.children}\n    </Content>\n  )\n}\n\nexport default body\n"]},"metadata":{},"sourceType":"module"}