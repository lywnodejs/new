{"ast":null,"code":"import \"antd/lib/space/style\";\nimport _Space from \"antd/lib/space\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Layout } from '~/components/Layout';\nimport React, { useEffect, useState } from 'react';\nimport { useCookies } from 'react-cookie';\nimport api from '~/api/order';\nimport apiProduct from '~/api/product';\nimport SearchForm from './SearchForm';\nimport TableList from './TableList';\nimport { withKeepAlive } from 'react-next-keep-alive';\nvar breadcrumbs = [{\n  text: '进件管理'\n}, {\n  text: '授信申请列表'\n}];\nvar pageParams = {\n  pageNo: 1,\n  pageSize: 10\n};\nvar values = {};\n\nfunction body(_ref) {\n  _s();\n\n  var checkProgressList = _ref.checkProgressList,\n      statusList = _ref.statusList,\n      applyStatusList = _ref.applyStatusList;\n\n  var _useCookies = useCookies(['tenantId']),\n      _useCookies2 = _slicedToArray(_useCookies, 1),\n      cookies = _useCookies2[0];\n\n  var _useState = useState([]),\n      productList = _useState[0],\n      setProductList = _useState[1];\n\n  var _useState2 = useState([]),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  useEffect(function () {\n    getProducts();\n  }, []);\n\n  var getProducts = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$apiProduct$get, _yield$apiProduct$get2, data, code;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return apiProduct.get_products({\n                tenantId: cookies.tenantId\n              });\n\n            case 3:\n              _yield$apiProduct$get = _context.sent;\n              _yield$apiProduct$get2 = _yield$apiProduct$get.data;\n              data = _yield$apiProduct$get2.data;\n              code = _yield$apiProduct$get2.code;\n\n              if (code == 0) {\n                setProductList(data);\n              }\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function getProducts() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var fetchList = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var values,\n          _yield$api$fetch_all_,\n          _yield$api$fetch_all_2,\n          data,\n          code,\n          _args2 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              values = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n              _context2.prev = 1;\n              _context2.next = 4;\n              return api.fetch_all_order(_objectSpread(_objectSpread(_objectSpread({}, pageParams), values), {}, {\n                tenantId: cookies.tenantId\n              }));\n\n            case 4:\n              _yield$api$fetch_all_ = _context2.sent;\n              _yield$api$fetch_all_2 = _yield$api$fetch_all_.data;\n              data = _yield$api$fetch_all_2.data;\n              code = _yield$api$fetch_all_2.code;\n\n              if (code === 0) {\n                setList(data);\n              }\n\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 11]]);\n    }));\n\n    return function fetchList() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onSearch = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(value) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log(value);\n              values = value;\n              pageParams.pageNo = 1;\n              fetchList(_objectSpread({}, values));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onSearch(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var onPage = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              fetchList(values);\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onPage() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, {\n    breadcrumbs: breadcrumbs\n  }, __jsx(_Space, {\n    direction: \"vertical\",\n    size: \"large\",\n    style: {\n      width: '100%'\n    }\n  }, __jsx(SearchForm, {\n    onSearch: onSearch,\n    applyStatusList: applyStatusList,\n    productList: productList,\n    statusList: statusList,\n    checkProgressList: checkProgressList\n  }), __jsx(TableList, {\n    list: list,\n    onPage: onPage,\n    productList: productList,\n    statusList: statusList,\n    applyStatusList: applyStatusList,\n    checkProgressList: checkProgressList,\n    pageParams: pageParams\n  })));\n}\n\n_s(body, \"1fuNzAE1fq6/tXW2AmVKFOLK3go=\", false, function () {\n  return [useCookies];\n});\n\nbody.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n  var backData, _yield$Promise$all, _yield$Promise$all2, _yield$Promise$all2$, data, code, _yield$Promise$all2$2, statusList, statusCode, _yield$Promise$all2$3, applyStatusList, applyStatusCode;\n\n  return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          backData = {\n            checkProgressList: [],\n            statusList: [],\n            applyStatusList: []\n          };\n          _context5.prev = 1;\n          _context5.next = 4;\n          return Promise.all([api.get_data_dict('LOAN_CHECK_PROGRESS'), api.get_data_dict('LOAN_ORDER_STATUS'), api.get_data_dict('LOAN_APPLY_STATUS')]);\n\n        case 4:\n          _yield$Promise$all = _context5.sent;\n          _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 3);\n          _yield$Promise$all2$ = _yield$Promise$all2[0].data;\n          data = _yield$Promise$all2$.data;\n          code = _yield$Promise$all2$.code;\n          _yield$Promise$all2$2 = _yield$Promise$all2[1].data;\n          statusList = _yield$Promise$all2$2.data;\n          statusCode = _yield$Promise$all2$2.code;\n          _yield$Promise$all2$3 = _yield$Promise$all2[2].data;\n          applyStatusList = _yield$Promise$all2$3.data;\n          applyStatusCode = _yield$Promise$all2$3.code;\n\n          if (!(code == 0)) {\n            _context5.next = 17;\n            break;\n          }\n\n          return _context5.abrupt(\"return\", {\n            checkProgressList: data,\n            statusList: statusCode === 0 ? statusList : [],\n            applyStatusList: applyStatusCode === 0 ? applyStatusList : []\n          });\n\n        case 17:\n          backData.code = code;\n          return _context5.abrupt(\"return\", backData);\n\n        case 21:\n          _context5.prev = 21;\n          _context5.t0 = _context5[\"catch\"](1);\n          console.log(_context5.t0);\n          return _context5.abrupt(\"return\", backData);\n\n        case 25:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _callee5, null, [[1, 21]]);\n}));\nexport default withKeepAlive(body, 'feed-order');","map":{"version":3,"sources":["/Users/liuyawei/Desktop/信用算力/项目/cloud_pro/pages/feed/order/index.js"],"names":["Layout","React","useEffect","useState","useCookies","api","apiProduct","SearchForm","TableList","withKeepAlive","breadcrumbs","text","pageParams","pageNo","pageSize","values","body","checkProgressList","statusList","applyStatusList","cookies","productList","setProductList","list","setList","getProducts","get_products","tenantId","data","code","console","log","fetchList","fetch_all_order","onSearch","value","onPage","width","getInitialProps","backData","Promise","all","get_data_dict","statusCode","applyStatusCode"],"mappings":"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","sourcesContent":["import {Layout} from '~/components/Layout'\nimport React, {useEffect, useState} from 'react'\nimport {Space, message} from 'antd'\nimport {useCookies} from 'react-cookie'\nimport api from '~/api/order'\nimport apiProduct from '~/api/product'\nimport SearchForm from './SearchForm'\nimport TableList from './TableList'\nimport {withKeepAlive} from 'react-next-keep-alive'\n\nconst breadcrumbs = [{text: '进件管理'}, {text: '授信申请列表'}]\n\nconst pageParams = {\n  pageNo: 1,\n  pageSize: 10,\n}\n\nlet values = {}\n\nfunction body({checkProgressList, statusList, applyStatusList}) {\n  const [cookies] = useCookies(['tenantId'])\n  const [productList, setProductList] = useState([])\n  const [list, setList] = useState([])\n\n  useEffect(() => {\n    getProducts()\n  }, [])\n\n  const getProducts = async () => {\n    try {\n      const {\n        data: {data, code},\n      } = await apiProduct.get_products({tenantId: cookies.tenantId})\n      if (code == 0) {\n        setProductList(data)\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const fetchList = async (values = {}) => {\n    try {\n      const {\n        data: {data, code},\n      } = await api.fetch_all_order({\n        ...pageParams,\n        ...values,\n        tenantId: cookies.tenantId,\n      })\n      if (code === 0) {\n        setList(data)\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  const onSearch = async (value) => {\n    console.log(value)\n    values = value\n    pageParams.pageNo = 1\n    fetchList({...values})\n  }\n\n  const onPage = async () => {\n    fetchList(values)\n  }\n\n  return (\n    <Layout breadcrumbs={breadcrumbs}>\n      <Space direction=\"vertical\" size=\"large\" style={{width: '100%'}}>\n        <SearchForm\n          {...{\n            onSearch,\n            applyStatusList,\n            productList,\n            statusList,\n            checkProgressList,\n          }}\n        />\n\n        <TableList\n          {...{\n            list,\n            onPage,\n            productList,\n            statusList,\n            applyStatusList,\n            checkProgressList,\n            pageParams,\n          }}\n        />\n      </Space>\n    </Layout>\n  )\n}\n\nbody.getInitialProps = async () => {\n  const backData = {\n    checkProgressList: [],\n    statusList: [],\n    applyStatusList: [],\n  }\n\n  try {\n    const [\n      {\n        data: {data, code},\n      },\n      {\n        data: {data: statusList, code: statusCode},\n      },\n      {\n        data: {data: applyStatusList, code: applyStatusCode},\n      },\n    ] = await Promise.all([\n      api.get_data_dict('LOAN_CHECK_PROGRESS'),\n      api.get_data_dict('LOAN_ORDER_STATUS'),\n      api.get_data_dict('LOAN_APPLY_STATUS'),\n    ])\n\n    if (code == 0) {\n      return {\n        checkProgressList: data,\n        statusList: statusCode === 0 ? statusList : [],\n        applyStatusList: applyStatusCode === 0 ? applyStatusList : [],\n      }\n    }\n    backData.code = code\n    return backData\n  } catch (err) {\n    console.log(err)\n    return backData\n  }\n}\n\nexport default withKeepAlive(body, 'feed-order')\n"]},"metadata":{},"sourceType":"module"}