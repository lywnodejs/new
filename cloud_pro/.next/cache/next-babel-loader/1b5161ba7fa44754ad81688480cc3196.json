{"ast":null,"code":"import \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Router from 'next/router';\nimport api from '~/api/system';\n\nconst TableList = ({\n  list,\n  onPage,\n  onEdit,\n  pullData,\n  pageParams,\n  onVertify,\n  labels\n}) => {\n  const {\n    0: pageSize,\n    1: setPageSize\n  } = useState(pageParams.pageSize);\n  const columns = [{\n    title: '公司名称',\n    dataIndex: 'companyName',\n    key: 'companyName',\n    width: 100\n  }, {\n    title: '标签',\n    dataIndex: 'label',\n    key: 'label',\n    width: 100,\n    render: (text, record, index) => {\n      let findOne = labels.find(item => item.code == text);\n      return findOne ? findOne.description : '';\n    }\n  }, {\n    title: 'IP地址',\n    dataIndex: 'ip',\n    key: 'ip',\n    width: 100\n  }, {\n    title: '状态',\n    dataIndex: 'useStatus',\n    key: 'useStatus',\n    width: 100,\n    render: (text, record, index) => {\n      return __jsx(React.Fragment, null, __jsx(_Badge, {\n        status: text == 1 ? 'success' : text == 2 ? 'processing' : 'error'\n      }), text == 1 ? '启用' : text == 2 ? '待审核' : '停用');\n    }\n  }, {\n    title: '操作',\n    dataIndex: 'cz',\n    key: 'cz',\n    width: 150,\n    render: (text, record, index) => {\n      return __jsx(React.Fragment, null, __jsx(_Button, {\n        type: \"link\",\n        onClick: () => onEdit(record)\n      }, \"\\u7F16\\u8F91\"), (record.useStatus == 1 || record.useStatus == 0) && __jsx(_Popconfirm, {\n        title: record.useStatus == 1 ? stopReactElement() : startReactElement(),\n        onConfirm: () => onSwitchStatus(record),\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\"\n      }, __jsx(_Button, {\n        type: \"link\"\n      }, record.useStatus == 1 ? '停用' : '启用')), record.useStatus == 2 && __jsx(_Button, {\n        type: \"link\",\n        onClick: () => onVertify(record)\n      }, \"\\u5BA1\\u6838\"));\n    }\n  }];\n\n  const onSwitchStatus = async item => {\n    try {\n      const {\n        data\n      } = await api.edit_ipconfig_one({\n        useStatus: 2,\n        auditStatus: item.useStatus == 1 ? 0 : 1,\n        id: item.id\n      });\n\n      if (data.code == 0) {\n        _message.success(`提交成功`);\n\n        pullData();\n      }\n    } catch (errorInfo) {\n      console.log('Failed:', errorInfo);\n    }\n  };\n\n  const stopReactElement = () => {\n    return __jsx(React.Fragment, null, __jsx(\"p\", null, \"\\u505C\\u7528\\u8BE5\\u914D\\u7F6E\\u4E48\\uFF1F\"));\n  };\n\n  const startReactElement = () => {\n    return __jsx(React.Fragment, null, __jsx(\"p\", null, \"\\u542F\\u7528\\u8BE5\\u914D\\u7F6E\\u4E48\\uFF1F\"), __jsx(\"p\", null, \"\\u786E\\u5B9A\\u540E\\u60A8\\u7684\\u64CD\\u4F5C\\u5C06\\u4F1A\\u88AB\\u5BA1\\u6838\\u3002\"));\n  };\n\n  const onShowSizeChange = (current, pageSize) => {\n    pageParams.pageSize = pageSize;\n    setPageSize(pageSize);\n  };\n\n  const pagination = {\n    defaultCurrent: 1,\n    total: list.total,\n    pageSize: pageSize,\n    showQuickJumper: true,\n    showSizeChanger: true,\n    onShowSizeChange: onShowSizeChange,\n    current: pageParams.pageNo,\n    showTotal: total => {\n      return `共 ${total} 条记录`;\n    },\n    onChange: pageNumber => {\n      pageParams.pageNo = pageNumber;\n      onPage();\n    }\n  };\n  return __jsx(_Table, {\n    rowKey: \"id\",\n    dataSource: list.list,\n    columns: columns,\n    bordered: true,\n    pagination: pagination,\n    scroll: {\n      y: '100%',\n      x: '100%'\n    }\n  });\n};\n\nexport default TableList;","map":null,"metadata":{},"sourceType":"module"}