{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/tree-select/style\";\nimport _TreeSelect from \"antd/lib/tree-select\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport { useCookies } from 'react-cookie';\nimport api from '~/api/business';\nimport styles from '~/pages/business/list/index.less';\n\nfunction AssignModal(props) {\n  var visible = props.visible,\n      onHide = props.onHide,\n      orderIds = props.orderIds,\n      onAssignSubmit = props.onAssignSubmit;\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState([]),\n      userList = _useState[0],\n      setUserList = _useState[1];\n\n  var _useState2 = useState(''),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  useEffect(function () {\n    function fetchData() {\n      fetchList();\n    }\n\n    visible && fetchData();\n  }, [visible]);\n\n  var fetchList = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$api$getUsers, _yield$api$getUsers$d, data, code;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return api.getUsers();\n\n            case 3:\n              _yield$api$getUsers = _context.sent;\n              _yield$api$getUsers$d = _yield$api$getUsers.data;\n              data = _yield$api$getUsers$d.data;\n              code = _yield$api$getUsers$d.code;\n\n              if (code == 0) {\n                tansvertKey(data, 1);\n                setUserList(data);\n                console.log(data);\n              }\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function fetchList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var tansvertKey = function tansvertKey(mem, level) {\n    if (Array.isArray(mem) && mem.length) {\n      for (var i = 0; i < mem.length; i++) {\n        setCommonKey(mem[i], level);\n        tansvertKey(mem[i].children);\n      }\n    }\n  };\n\n  var setCommonKey = function setCommonKey(one, level) {\n    one.title = \"\".concat(one.name);\n    one.disabled = level === 1; // one.value = `${one.id}-${new Date().getTime() + (Math.random()*1000).toFixed(0)}`\n\n    one.value = \"\".concat(one.id, \"-\").concat(new Date().getTime() + (Math.random() * 1000).toFixed(0)); // one.key = `${one.id}`\n    // one.key = String(new Date().getTime() + one.id)\n  };\n\n  var onEdit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var arr, giveAccountManagerId;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (value) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", _message.error(\"\\u8BF7\\u9009\\u62E9\\u8981\\u5206\\u914D\\u7684\".concat('信审员')));\n\n            case 2:\n              arr = value.split('-');\n              giveAccountManagerId = arr[0];\n\n              if (onAssignSubmit) {\n                typeof onAssignSubmit === 'function' && onAssignSubmit({\n                  orderIds: orderIds,\n                  giveAccountManagerId: giveAccountManagerId\n                });\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onEdit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onChange = function onChange(value) {\n    setValue(value);\n  };\n\n  return __jsx(_Modal, {\n    title: \"\\u9009\\u62E9\\u5206\\u914D\",\n    maskClosable: false,\n    visible: visible,\n    onOk: onEdit,\n    onCancel: onHide,\n    cancelText: \"\\u53D6\\u6D88\",\n    okText: \"\\u786E\\u5B9A\",\n    width: 600,\n    height: 600\n  }, __jsx(_Row, {\n    gutter: [0, 16]\n  }, __jsx(_Col, {\n    span: 4\n  }, \"\\u9009\\u4E2D\\u6570\\u91CF\\uFF1A\"), __jsx(_Col, {\n    span: 20\n  }, Array.isArray(orderIds) ? orderIds.length : 0, \"\\u4E2A\\uFF0C\\u8BF7\\u9009\\u62E9\\u5206\\u914D\\u5BF9\\u8C61\")), __jsx(_TreeSelect, {\n    dropdownClassName: styles.businessBox,\n    treeNodeFilterProp: 'name',\n    showSearch: true,\n    style: {\n      width: '100%'\n    },\n    value: value,\n    dropdownStyle: {\n      maxHeight: 400,\n      overflow: 'auto'\n    },\n    treeData: userList,\n    placeholder: \"\\u8BF7\\u9009\\u62E9\",\n    treeDefaultExpandAll: true,\n    onChange: onChange\n  }));\n}\n\nexport default AssignModal;","map":null,"metadata":{},"sourceType":"module"}