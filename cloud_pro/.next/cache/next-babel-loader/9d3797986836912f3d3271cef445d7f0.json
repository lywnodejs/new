{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport moment from 'moment';\nexport default function SendSms(props) {\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  useEffect(function () {\n    if (visible) {\n      form.resetFields(); // console.log('add history:', props)\n\n      if (props.phoneNo) {\n        form.setFieldsValue({\n          urgeMobilePhone: props.phoneNo\n        });\n      }\n    }\n  }, [visible]);\n\n  var onChangeIsConnect = function onChangeIsConnect(e) {\n    form.setFieldsValue({\n      urgeResult: '',\n      reasonType: '',\n      repayDesire: '',\n      promiseRepayTime: '',\n      remark: ''\n    });\n  };\n\n  var onChangeRepayDesire = function onChangeRepayDesire(e) {\n    form.setFieldsValue({\n      urgeResult: ''\n    });\n  };\n\n  var successFunc = function successFunc() {\n    setLoading(false);\n    setVisible(false);\n  };\n\n  var failFunc = function failFunc() {\n    setLoading(false);\n  };\n\n  var handleOk = function handleOk() {\n    form.validateFields().then(function (_ref) {\n      var promiseRepayTime = _ref.promiseRepayTime,\n          values = _objectWithoutProperties(_ref, [\"promiseRepayTime\"]);\n\n      setLoading(true);\n      values.promiseRepayTimeString = promiseRepayTime ? moment(promiseRepayTime).format('YYYY-MM-DD HH:mm:ss') : '';\n      props.getHistoryData(values, successFunc, failFunc);\n    })[\"catch\"](function (errorInfo) {\n      console.error(errorInfo);\n    });\n  };\n\n  var layout = {\n    labelCol: {\n      span: 4\n    },\n    wrapperCol: {\n      span: 16\n    }\n  };\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    onClick: function onClick() {\n      return setVisible(true);\n    }\n  }, props.target ? props.target : __jsx(_Button, {\n    type: props.btnType || 'link'\n  }, \"\\u65B0\\u589E\\u50AC\\u8BB0\")), __jsx(_Modal, {\n    width: 750,\n    title: \"\\u65B0\\u589E\\u50AC\\u6536\\u8BB0\\u5F55\",\n    visible: visible,\n    confirmLoading: loading,\n    onOk: handleOk,\n    onCancel: function onCancel() {\n      return setVisible(false);\n    }\n  }, __jsx(_Form, _extends({}, layout, {\n    form: form,\n    name: \"basic\"\n  }), __jsx(_Form.Item, {\n    label: \"\\u50AC\\u6536\\u65B9\\u5F0F\",\n    name: \"collectionMethod\",\n    rules: [{\n      required: true,\n      message: '请选择催收方式!'\n    }]\n  }, __jsx(_Radio.Group, null, props.urgeMethods.map(function (one) {\n    return __jsx(_Radio, {\n      value: one.code,\n      key: one.code,\n      style: {\n        marginBottom: 15\n      }\n    }, one.description);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u50AC\\u6536\\u5BF9\\u8C61\",\n    name: \"collectionObject\",\n    rules: [{\n      required: true,\n      message: '请选择催收方式!'\n    }]\n  }, __jsx(_Radio.Group, null, props.urgeObjects.map(function (one) {\n    return __jsx(_Radio, {\n      value: one.code,\n      key: one.code,\n      style: {\n        marginBottom: 15\n      }\n    }, one.description);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u8054\\u7CFB\\u53F7\\u7801\",\n    name: \"urgeMobilePhone\",\n    rules: [{\n      required: true,\n      message: '请输入联系号码!'\n    }, {\n      pattern: /^1[3456789]\\d{9}$/,\n      message: '请输入正确手机号格式!'\n    }]\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\"\n  })), __jsx(_Form.Item, {\n    label: \"\\u662F\\u5426\\u63A5\\u901A\",\n    name: \"isConnect\",\n    rules: [{\n      required: true,\n      message: '请选择是否接通!'\n    }]\n  }, __jsx(_Radio.Group, {\n    onChange: onChangeIsConnect\n  }, props.urgeIsConnects.map(function (one) {\n    return __jsx(_Radio, {\n      value: one.code,\n      key: one.code,\n      style: {\n        marginBottom: 15\n      }\n    }, one.description);\n  }))), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.isConnect !== currentValues.isConnect;\n    }\n  }, function (_ref2) {\n    var getFieldValue = _ref2.getFieldValue;\n\n    if (getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u903E\\u671F\\u539F\\u56E0\",\n        name: \"reasonType\",\n        rules: [{\n          required: true,\n          message: '请选择逾期原因'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeReasonTypes.map(function (one) {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.code,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n  }), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.isConnect !== currentValues.isConnect;\n    }\n  }, function (_ref3) {\n    var getFieldValue = _ref3.getFieldValue;\n\n    if (getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8FD8\\u6B3E\\u610F\\u613F\",\n        name: \"repayDesire\",\n        rules: [{\n          required: true,\n          message: '请选择还款意愿'\n        }]\n      }, __jsx(_Radio.Group, {\n        onChange: onChangeRepayDesire\n      }, props.urgeRepayDesires.map(function (one) {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.code,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n  }), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.repayDesire !== currentValues.repayDesire || prevValues.isConnect !== currentValues.isConnect;\n    }\n  }, function (_ref4) {\n    var getFieldValue = _ref4.getFieldValue;\n\n    if ( // getFieldValue('repayDesire') == '1' &&\n    getFieldValue('isConnect') == '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8054\\u7EDC\\u7ED3\\u679C\",\n        name: \"collectionResult\",\n        rules: [{\n          required: true,\n          message: '请选择联络结果'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeResultUnknows.map(function (one) {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.id,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n\n    if (getFieldValue('repayDesire') == '2' && getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8054\\u7EDC\\u7ED3\\u679C\",\n        name: \"collectionResult\",\n        rules: [{\n          required: true,\n          message: '请选择联络结果'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeResultHighs.map(function (one) {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.id,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n\n    if (getFieldValue('repayDesire') == '3' && getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        label: \"\\u8054\\u7EDC\\u7ED3\\u679C\",\n        name: \"collectionResult\",\n        rules: [{\n          required: true,\n          message: '请选择联络结果'\n        }]\n      }, __jsx(_Radio.Group, null, props.urgeResultLows.map(function (one) {\n        return __jsx(_Radio, {\n          value: one.code,\n          key: one.id,\n          style: {\n            marginBottom: 15\n          }\n        }, one.description);\n      })));\n    }\n  }), __jsx(_Form.Item, {\n    noStyle: true,\n    shouldUpdate: function shouldUpdate(prevValues, currentValues) {\n      return prevValues.isConnect !== currentValues.isConnect;\n    }\n  }, function (_ref5) {\n    var getFieldValue = _ref5.getFieldValue;\n\n    if (getFieldValue('isConnect') != '0') {\n      return __jsx(_Form.Item, {\n        name: \"promiseRepayTime\",\n        label: \"\\u627F\\u82E5\\u8FD8\\u6B3E\\u65E5\\u671F\"\n      }, __jsx(_DatePicker, {\n        showTime: true,\n        format: \"YYYY-MM-DD HH:mm:ss\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u65E5\\u671F\"\n      }));\n    }\n  }), __jsx(_Form.Item, {\n    label: \"\\u5907\\u6CE8\",\n    name: \"remark\",\n    rules: [{\n      required: true,\n      message: '请输入备注!'\n    }, {\n      min: 6,\n      message: '输入范围大于5字符!'\n    }, {\n      max: 10,\n      message: '输入范围小于等于10字符!'\n    }, {\n      whitespace: true\n    }]\n  }, __jsx(_Input.TextArea, {\n    rows: 4,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u81F3\\u5C115\\u4E2A\\u5B57\\u7B26\"\n  })))));\n}","map":null,"metadata":{},"sourceType":"module"}