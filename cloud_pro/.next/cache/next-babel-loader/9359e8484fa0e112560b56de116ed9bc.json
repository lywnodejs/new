{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/space/style\";\nimport _Space from \"antd/lib/space\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Layout } from '~/components/Layout';\nimport React, { useEffect, useState } from 'react';\nimport api from '~/api/collection';\nimport apiProduct from '~/api/product';\nimport BaseTable from '~/components/pages/collection/reminded/form/BaseTable';\nimport AddContacts from '~/components/pages/collection/reminded/form/AddContacts';\nimport AddHistory from '../../../../components/pages/collection/reminded/form/AddHistory';\nvar breadcrumbs = [{\n  text: '催收管理'\n}, {\n  text: '待催列表'\n}, {\n  text: '通讯录详情'\n}];\n\nfunction body(props) {\n  var _useState = useState({\n    pageNo: 1,\n    pageSize: 10\n  }),\n      pageParams = _useState[0],\n      setPageParams = _useState[1];\n\n  var _useState2 = useState([]),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  useEffect(function () {\n    getList();\n  }, []);\n\n  var getList = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$api$getContact, _yield$api$getContact2, code, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.getContactlist(props.userId);\n\n            case 2:\n              _yield$api$getContact = _context.sent;\n              _yield$api$getContact2 = _yield$api$getContact.data;\n              code = _yield$api$getContact2.code;\n              data = _yield$api$getContact2.data;\n\n              if (code == 0) {\n                setList(data || []);\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getHistoryData = function getHistoryData(formData, successFun, failFun) {\n    var params = _objectSpread(_objectSpread({}, formData), {}, {\n      collectionOrderId: +props.orderId,\n      collectionMobilePhoneEncrypt: props.mobilePhoneEncrypt\n    });\n\n    api.add_one_collection(params).then(function (_ref2) {\n      var code = _ref2.data.code;\n\n      if (code == 0) {\n        _message.success('添加成功');\n\n        successFun();\n      } else {\n        failFun();\n      }\n    })[\"catch\"](function () {\n      failFun();\n    });\n  };\n\n  var columns = [{\n    title: '姓名',\n    dataIndex: 'bookName'\n  }, {\n    title: '联系号码',\n    dataIndex: 'phoneNo'\n  }, {\n    title: '操作',\n    key: 'cz',\n    width: 150,\n    render: function render(r) {\n      return __jsx(_Space, null, __jsx(AddHistory, _extends({}, props, {\n        phoneNo: r.phoneNo,\n        getHistoryData: getHistoryData\n      })));\n    }\n  }];\n\n  var changePage = function changePage(pageNo, pageSize) {\n    console.log(pageNo, pageSize);\n    setPageParams({\n      pageNo: pageNo,\n      pageSize: pageSize\n    });\n  };\n\n  return __jsx(Layout, {\n    breadcrumbs: breadcrumbs\n  }, __jsx(BaseTable, {\n    list: list // pageParams={pageParams}\n    // changePage={changePage}\n    ,\n    columns: columns\n  }));\n}\n\nbody.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(context) {\n    var backData, _yield$Promise$all, _yield$Promise$all2, _yield$Promise$all2$, data, code, _yield$Promise$all2$2, collectionLevels, levelCode, _yield$Promise$all2$3, urgeMethods, levelCode01, _yield$Promise$all2$4, urgeObjects, levelCode02, _yield$Promise$all2$5, urgeResults, levelCode03, _yield$Promise$all2$6, urgeResultUnknows, levelCode04, _yield$Promise$all2$7, urgeResultHighs, levelCode05, _yield$Promise$all2$8, urgeResultLows, levelCode06, _yield$Promise$all2$9, urgeIsConnects, levelCode07, _yield$Promise$all2$10, urgeReasonTypes, levelCode08, _yield$Promise$all2$11, urgeRepayDesires, levelCode09;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            backData = {\n              collectionProducts: [],\n              collectionLevels: [],\n              urgeMethods: [],\n              urgeObjects: [],\n              urgeResults: [],\n              urgeResultUnknows: [],\n              urgeResultHighs: [],\n              urgeResultLows: [],\n              urgeIsConnects: [],\n              urgeReasonTypes: [],\n              urgeRepayDesires: [],\n              connectResults: [],\n              unConnectResults: [],\n              orderId: context.ctx.query.orderId,\n              userId: context.ctx.query.uid\n            };\n            _context2.prev = 1;\n            _context2.next = 4;\n            return Promise.all([api.get_data_dict('COLLECTION_PRODUCT'), api.get_data_dict('COLLECTION_LEVEL'), api.get_data_dict('URGE_METHOD'), api.get_data_dict('URGE_OBJECT'), api.get_data_dict('URGE_RESULT'), api.get_data_dict('URGE_RESULT_UNKNOWN'), api.get_data_dict('URGE_RESULT_HIGH'), api.get_data_dict('URGE_RESULT_LOW'), api.get_data_dict('URGE_IS_CONNECT'), api.get_data_dict('URGE_REASON_TYPE'), api.get_data_dict('URGE_REPAY_DESIRE')]);\n\n          case 4:\n            _yield$Promise$all = _context2.sent;\n            _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 11);\n            _yield$Promise$all2$ = _yield$Promise$all2[0].data;\n            data = _yield$Promise$all2$.data;\n            code = _yield$Promise$all2$.code;\n            _yield$Promise$all2$2 = _yield$Promise$all2[1].data;\n            collectionLevels = _yield$Promise$all2$2.data;\n            levelCode = _yield$Promise$all2$2.code;\n            _yield$Promise$all2$3 = _yield$Promise$all2[2].data;\n            urgeMethods = _yield$Promise$all2$3.data;\n            levelCode01 = _yield$Promise$all2$3.code;\n            _yield$Promise$all2$4 = _yield$Promise$all2[3].data;\n            urgeObjects = _yield$Promise$all2$4.data;\n            levelCode02 = _yield$Promise$all2$4.code;\n            _yield$Promise$all2$5 = _yield$Promise$all2[4].data;\n            urgeResults = _yield$Promise$all2$5.data;\n            levelCode03 = _yield$Promise$all2$5.code;\n            _yield$Promise$all2$6 = _yield$Promise$all2[5].data;\n            urgeResultUnknows = _yield$Promise$all2$6.data;\n            levelCode04 = _yield$Promise$all2$6.code;\n            _yield$Promise$all2$7 = _yield$Promise$all2[6].data;\n            urgeResultHighs = _yield$Promise$all2$7.data;\n            levelCode05 = _yield$Promise$all2$7.code;\n            _yield$Promise$all2$8 = _yield$Promise$all2[7].data;\n            urgeResultLows = _yield$Promise$all2$8.data;\n            levelCode06 = _yield$Promise$all2$8.code;\n            _yield$Promise$all2$9 = _yield$Promise$all2[8].data;\n            urgeIsConnects = _yield$Promise$all2$9.data;\n            levelCode07 = _yield$Promise$all2$9.code;\n            _yield$Promise$all2$10 = _yield$Promise$all2[9].data;\n            urgeReasonTypes = _yield$Promise$all2$10.data;\n            levelCode08 = _yield$Promise$all2$10.code;\n            _yield$Promise$all2$11 = _yield$Promise$all2[10].data;\n            urgeRepayDesires = _yield$Promise$all2$11.data;\n            levelCode09 = _yield$Promise$all2$11.code;\n\n            if (!(code == 0)) {\n              _context2.next = 41;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              collectionProducts: data,\n              collectionLevels: levelCode === 0 ? collectionLevels : [],\n              urgeMethods: levelCode01 === 0 ? urgeMethods : [],\n              urgeObjects: levelCode02 === 0 ? urgeObjects : [],\n              urgeResults: levelCode03 === 0 ? urgeResults : [],\n              urgeResultUnknows: levelCode04 === 0 ? urgeResultUnknows : [],\n              urgeResultHighs: levelCode05 === 0 ? urgeResultHighs : [],\n              urgeResultLows: levelCode06 === 0 ? urgeResultLows : [],\n              urgeIsConnects: levelCode07 === 0 ? urgeIsConnects : [],\n              urgeReasonTypes: levelCode08 === 0 ? urgeReasonTypes : [],\n              urgeRepayDesires: levelCode09 === 0 ? urgeRepayDesires : [],\n              orderId: context.ctx.query.orderId,\n              userId: context.ctx.query.uid\n            });\n\n          case 41:\n            backData.code = code;\n            return _context2.abrupt(\"return\", backData);\n\n          case 45:\n            _context2.prev = 45;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.log(_context2.t0);\n            return _context2.abrupt(\"return\", backData);\n\n          case 49:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 45]]);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default body;","map":null,"metadata":{},"sourceType":"module"}