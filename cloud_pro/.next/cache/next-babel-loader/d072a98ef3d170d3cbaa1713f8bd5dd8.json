{"ast":null,"code":"import \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Layout } from '~/components/Layout';\nimport React, { useEffect, useState } from 'react';\nimport apiProduct from '~/api/product';\nimport moment from 'moment';\nconst pageParams = {\n  pageNum: 1,\n  pageSize: 10\n};\nconst {\n  RangePicker\n} = _DatePicker;\n\nconst getCurrentMonthFirst = () => {\n  var date = new Date();\n  date.setDate(1);\n  return date;\n};\n\nconst getData = async (values = {}) => {\n  const {\n    time\n  } = values;\n\n  if (Array.isArray(time)) {\n    values = _objectSpread(_objectSpread({}, values), {}, {\n      startTime: moment(time[0]).format('YYYY-MM-DD'),\n      endTime: moment(time[1]).format('YYYY-MM-DD')\n    });\n  } else if (time === undefined) {\n    values = _objectSpread(_objectSpread({}, values), {}, {\n      startTime: moment(getCurrentMonthFirst(), 'YYYY-MM-DD').format('YYYY-MM-DD'),\n      endTime: moment(new Date(new Date().setDate(new Date().getDate()))).format('YYYY-MM-DD')\n    });\n  } else if (time === null) {\n    values = _objectSpread(_objectSpread({}, values), {}, {\n      startTime: null,\n      endTime: null\n    });\n  }\n\n  delete values.time;\n\n  try {\n    let {\n      data: {\n        code,\n        data\n      }\n    } = await apiProduct.getLoanSummary(_objectSpread(_objectSpread({}, pageParams), values));\n\n    if (code == 0) {\n      return data;\n    }\n\n    return {\n      total: 0,\n      list: []\n    };\n  } catch (e) {\n    return {\n      total: 0,\n      list: []\n    };\n  }\n};\n\nconst breadcrumbs = [{\n  text: 'BI报表'\n}, {\n  text: '业务台账'\n}, {\n  text: '贷款汇总统计报表'\n}];\n\nfunction body(props) {\n  const {\n    0: data,\n    1: setData\n  } = useState(props.data);\n\n  const [form] = _Form.useForm();\n\n  const {\n    0: searchParams,\n    1: setSearchParams\n  } = useState({});\n  useEffect(() => {}, []);\n\n  const onSearch = value => {\n    pageParams.pageNum = 1;\n    updateList(_objectSpread(_objectSpread({}, value), pageParams));\n    setSearchParams(_objectSpread(_objectSpread({}, value), pageParams));\n  };\n\n  const onResetForm = () => {\n    form.resetFields();\n    onSearch();\n  };\n\n  const onChangePage = (pageNum = pageParams.pageNum) => {\n    pageParams.pageNum = pageNum;\n    updateList(_objectSpread(_objectSpread({}, searchParams), pageParams));\n  };\n\n  const updateList = async params => {\n    let data = await getData(_objectSpread({}, params));\n    setData(data);\n  };\n\n  const columns = [// {\n  //   title: '序号',\n  //   dataIndex: 'index',\n  //   align: 'left',\n  //   fixed: 'left',\n  // },\n  {\n    title: '统计日期',\n    dataIndex: 'statDate',\n    align: 'left',\n    fixed: 'left'\n  }, {\n    title: '当日新增授信户数',\n    dataIndex: 'userNum',\n    align: 'left'\n  }, {\n    title: '当日新增授信金额',\n    dataIndex: 'creditAmount',\n    align: 'left'\n  }, {\n    title: '当日新增放款笔数',\n    dataIndex: 'loanNum',\n    align: 'left'\n  }, {\n    title: '当日新增放款金额',\n    dataIndex: 'loanAmount',\n    align: 'left'\n  }, {\n    title: '当日新增应收利息',\n    dataIndex: 'interestReceivable',\n    align: 'left'\n  }, {\n    title: '当日新增还款笔数',\n    dataIndex: 'repaymentNum',\n    align: 'left'\n  }, {\n    title: '当日新增还款金额',\n    dataIndex: 'repaymentAmount',\n    align: 'left'\n  }, {\n    title: '当日新增还款本金',\n    dataIndex: 'repaymentPrincipal',\n    align: 'left'\n  }, {\n    title: '当日新增还款利息',\n    dataIndex: 'repaymentInterest',\n    align: 'left'\n  }, {\n    title: '当日新增还款罚息',\n    dataIndex: 'repaymentPenaltyInterest',\n    align: 'left'\n  }, {\n    title: '累计借据笔数',\n    dataIndex: 'IOUNum',\n    align: 'left'\n  }, {\n    title: '累计放款金额',\n    dataIndex: 'cumulativeLoanAmount',\n    align: 'left'\n  }, {\n    title: '累计放款应收利息',\n    dataIndex: 'cumulativeLoanInterest',\n    align: 'left'\n  }, {\n    title: '累计还款笔数',\n    dataIndex: 'cumulativeLoanNum',\n    align: 'left'\n  }, {\n    title: '累计还款金额',\n    dataIndex: 'cumulativeReoaymentAmount',\n    align: 'left'\n  }, {\n    title: '累计已还本金',\n    dataIndex: 'cumulativePrincipal',\n    align: 'left'\n  }, {\n    title: '累计还款利息',\n    dataIndex: 'cumulativeInterest',\n    align: 'left'\n  }, {\n    title: '累计还款罚息',\n    dataIndex: 'cumulativePenaltyInterest',\n    align: 'left'\n  }, {\n    title: '未结清借据笔数',\n    dataIndex: '未结清借据笔数',\n    align: 'left'\n  }, {\n    title: '未结清借据金额',\n    dataIndex: 'unclearedIOUAmount',\n    align: 'left'\n  }, {\n    title: '未结清借据已还本金',\n    dataIndex: 'unclearedPrincipal',\n    align: 'left'\n  }, {\n    title: '未结清借据本金余额',\n    dataIndex: 'unclearedBalance',\n    align: 'left'\n  }, {\n    title: '未结清借据应收利息积数',\n    dataIndex: 'unclearedProduct',\n    align: 'left'\n  }];\n  const paginationConfig = {\n    total: data.total,\n    current: pageParams.pageNum,\n    showSizeChanger: false,\n    showQuickJumper: true,\n    defaultPageSize: pageParams.pageSize,\n    showTotal: total => `共 ${total} 条`,\n    onChange: onChangePage\n  }; // const disabledDate = (current) => {\n  //   return current > new Date()\n  // }\n\n  return __jsx(Layout, {\n    breadcrumbs: breadcrumbs\n  }, __jsx(_Card, {\n    style: {\n      marginBottom: 30\n    }\n  }, __jsx(_Form, {\n    form: form,\n    name: \"search\",\n    onFinish: onSearch,\n    layout: \"inline\",\n    initialValues: {\n      time: [moment(getCurrentMonthFirst(), 'YYYY-MM-DD'), moment(new Date(new Date().setDate(new Date().getDate())), 'YYYY-MM-DD')],\n      productId: null\n    }\n  }, __jsx(_Form.Item, {\n    label: \"\\u65E5\\u671F\",\n    name: \"time\"\n  }, __jsx(RangePicker, null)), __jsx(_Form.Item, null, __jsx(_Button, {\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"\\u67E5\\u8BE2\")), __jsx(_Form.Item, null, __jsx(_Button, {\n    type: \"default\",\n    onClick: onResetForm\n  }, \"\\u91CD\\u7F6E\")))), __jsx(_Table, {\n    bordered: true,\n    rowKey: (v, i) => i,\n    align: \"center\",\n    scroll: {\n      x: 'max-content'\n    },\n    pagination: paginationConfig,\n    columns: columns,\n    dataSource: data.list || []\n  }));\n}\n\nbody.getInitialProps = async ctx => {\n  let data = await getData();\n  return {\n    data: data\n  };\n};\n\nexport default body;","map":{"version":3,"sources":["/Users/liuyawei/Desktop/信用算力/项目/cloud_pro/pages/bi/book/loan/index.js"],"names":["Layout","React","useEffect","useState","apiProduct","moment","pageParams","pageNum","pageSize","RangePicker","getCurrentMonthFirst","date","Date","setDate","getData","values","time","Array","isArray","startTime","format","endTime","undefined","getDate","data","code","getLoanSummary","total","list","e","breadcrumbs","text","body","props","setData","form","useForm","searchParams","setSearchParams","onSearch","value","updateList","onResetForm","resetFields","onChangePage","params","columns","title","dataIndex","align","fixed","paginationConfig","current","showSizeChanger","showQuickJumper","defaultPageSize","showTotal","onChange","marginBottom","productId","v","i","x","getInitialProps","ctx"],"mappings":"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","sourcesContent":["import {Layout} from '~/components/Layout'\nimport React, {useEffect, useState} from 'react'\nimport apiProduct from '~/api/product'\nimport {Table, Button, Form, Input, Card, DatePicker, Select} from 'antd'\nimport moment from 'moment'\n\nconst pageParams = {\n  pageNum: 1,\n  pageSize: 10,\n}\nconst {RangePicker} = DatePicker\n\nconst getCurrentMonthFirst = () => {\n  var date = new Date()\n  date.setDate(1)\n  return date\n}\n\nconst getData = async (values = {}) => {\n  const {time} = values\n  if (Array.isArray(time)) {\n    values = {\n      ...values,\n      startTime: moment(time[0]).format('YYYY-MM-DD'),\n      endTime: moment(time[1]).format('YYYY-MM-DD'),\n    }\n  } else if (time === undefined) {\n    values = {\n      ...values,\n      startTime: moment(getCurrentMonthFirst(), 'YYYY-MM-DD').format(\n        'YYYY-MM-DD',\n      ),\n      endTime: moment(\n        new Date(new Date().setDate(new Date().getDate())),\n      ).format('YYYY-MM-DD'),\n    }\n  } else if (time === null) {\n    values = {\n      ...values,\n      startTime: null,\n      endTime: null,\n    }\n  }\n  delete values.time\n  try {\n    let {\n      data: {code, data},\n    } = await apiProduct.getLoanSummary({\n      ...pageParams,\n      ...values,\n    })\n    if (code == 0) {\n      return data\n    }\n    return {\n      total: 0,\n      list: [],\n    }\n  } catch (e) {\n    return {\n      total: 0,\n      list: [],\n    }\n  }\n}\n\nconst breadcrumbs = [\n  {text: 'BI报表'},\n  {text: '业务台账'},\n  {text: '贷款汇总统计报表'},\n]\n\nfunction body(props) {\n  const [data, setData] = useState(props.data)\n  const [form] = Form.useForm()\n  const [searchParams, setSearchParams] = useState({})\n\n  useEffect(() => {}, [])\n\n  const onSearch = (value) => {\n    pageParams.pageNum = 1\n    updateList({...value, ...pageParams})\n    setSearchParams({...value, ...pageParams})\n  }\n  const onResetForm = () => {\n    form.resetFields()\n    onSearch()\n  }\n\n  const onChangePage = (pageNum = pageParams.pageNum) => {\n    pageParams.pageNum = pageNum\n    updateList({...searchParams, ...pageParams})\n  }\n\n  const updateList = async (params) => {\n    let data = await getData({...params})\n    setData(data)\n  }\n\n  const columns = [\n    // {\n    //   title: '序号',\n    //   dataIndex: 'index',\n    //   align: 'left',\n    //   fixed: 'left',\n    // },\n    {\n      title: '统计日期',\n      dataIndex: 'statDate',\n      align: 'left',\n      fixed: 'left',\n    },\n    {\n      title: '当日新增授信户数',\n      dataIndex: 'userNum',\n      align: 'left',\n    },\n    {\n      title: '当日新增授信金额',\n      dataIndex: 'creditAmount',\n      align: 'left',\n    },\n    {\n      title: '当日新增放款笔数',\n      dataIndex: 'loanNum',\n      align: 'left',\n    },\n    {\n      title: '当日新增放款金额',\n      dataIndex: 'loanAmount',\n      align: 'left',\n    },\n    {\n      title: '当日新增应收利息',\n      dataIndex: 'interestReceivable',\n      align: 'left',\n    },\n    {\n      title: '当日新增还款笔数',\n      dataIndex: 'repaymentNum',\n      align: 'left',\n    },\n    {\n      title: '当日新增还款金额',\n      dataIndex: 'repaymentAmount',\n      align: 'left',\n    },\n    {\n      title: '当日新增还款本金',\n      dataIndex: 'repaymentPrincipal',\n      align: 'left',\n    },\n    {\n      title: '当日新增还款利息',\n      dataIndex: 'repaymentInterest',\n      align: 'left',\n    },\n    {\n      title: '当日新增还款罚息',\n      dataIndex: 'repaymentPenaltyInterest',\n      align: 'left',\n    },\n    {\n      title: '累计借据笔数',\n      dataIndex: 'IOUNum',\n      align: 'left',\n    },\n    {\n      title: '累计放款金额',\n      dataIndex: 'cumulativeLoanAmount',\n      align: 'left',\n    },\n    {\n      title: '累计放款应收利息',\n      dataIndex: 'cumulativeLoanInterest',\n      align: 'left',\n    },\n    {\n      title: '累计还款笔数',\n      dataIndex: 'cumulativeLoanNum',\n      align: 'left',\n    },\n    {\n      title: '累计还款金额',\n      dataIndex: 'cumulativeReoaymentAmount',\n      align: 'left',\n    },\n    {\n      title: '累计已还本金',\n      dataIndex: 'cumulativePrincipal',\n      align: 'left',\n    },\n    {\n      title: '累计还款利息',\n      dataIndex: 'cumulativeInterest',\n      align: 'left',\n    },\n    {\n      title: '累计还款罚息',\n      dataIndex: 'cumulativePenaltyInterest',\n      align: 'left',\n    },\n    {\n      title: '未结清借据笔数',\n      dataIndex: '未结清借据笔数',\n      align: 'left',\n    },\n    {\n      title: '未结清借据金额',\n      dataIndex: 'unclearedIOUAmount',\n      align: 'left',\n    },\n    {\n      title: '未结清借据已还本金',\n      dataIndex: 'unclearedPrincipal',\n      align: 'left',\n    },\n    {\n      title: '未结清借据本金余额',\n      dataIndex: 'unclearedBalance',\n      align: 'left',\n    },\n    {\n      title: '未结清借据应收利息积数',\n      dataIndex: 'unclearedProduct',\n      align: 'left',\n    },\n  ]\n\n  const paginationConfig = {\n    total: data.total,\n    current: pageParams.pageNum,\n    showSizeChanger: false,\n    showQuickJumper: true,\n    defaultPageSize: pageParams.pageSize,\n    showTotal: (total) => `共 ${total} 条`,\n    onChange: onChangePage,\n  }\n  // const disabledDate = (current) => {\n  //   return current > new Date()\n  // }\n\n  return (\n    <Layout breadcrumbs={breadcrumbs}>\n      <Card style={{marginBottom: 30}}>\n        <Form\n          form={form}\n          name=\"search\"\n          onFinish={onSearch}\n          layout=\"inline\"\n          initialValues={{\n            time: [\n              moment(getCurrentMonthFirst(), 'YYYY-MM-DD'),\n              moment(\n                new Date(new Date().setDate(new Date().getDate())),\n                'YYYY-MM-DD',\n              ),\n            ],\n            productId: null,\n          }}\n        >\n          <Form.Item label=\"日期\" name=\"time\">\n            <RangePicker />\n          </Form.Item>\n          <Form.Item>\n            <Button type=\"primary\" htmlType=\"submit\">\n              查询\n            </Button>\n          </Form.Item>\n          <Form.Item>\n            <Button type=\"default\" onClick={onResetForm}>\n              重置\n            </Button>\n          </Form.Item>\n        </Form>\n      </Card>\n      <Table\n        bordered\n        rowKey={(v, i) => i}\n        align=\"center\"\n        scroll={{x: 'max-content'}}\n        pagination={paginationConfig}\n        columns={columns}\n        dataSource={data.list || []}\n      />\n    </Layout>\n  )\n}\n\nbody.getInitialProps = async (ctx) => {\n  let data = await getData()\n  return {data: data}\n}\n\nexport default body\n"]},"metadata":{},"sourceType":"module"}