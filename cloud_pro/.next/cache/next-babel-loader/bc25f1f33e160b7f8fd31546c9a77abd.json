{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/transfer/style\";\nimport _Transfer from \"antd/lib/transfer\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/checkbox/style\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nexport default function (props) {\n  var _useState = useState([]),\n      targetKeys = _useState[0],\n      setTargetKeys = _useState[1];\n\n  var _useState2 = useState([]),\n      selectedKeys = _useState2[0],\n      setSelectedKeys = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  useEffect(function () {\n    if (props.visible) {\n      form.resetFields();\n\n      if (props.data) {\n        var params = _objectSpread({}, props.data);\n\n        if (Array.isArray(props.data.detailList)) {\n          var ids = props.data.detailList.map(function (v) {\n            return v.accountId;\n          });\n          params.detailList = ids;\n          setTargetKeys(ids);\n        }\n\n        form.setFieldsValue(params);\n      }\n    } else {\n      setLoading(false);\n      setTargetKeys([]);\n      setSelectedKeys([]);\n    }\n  }, [props.visible]);\n  useEffect(function () {\n    if (!props.loading) {\n      setLoading(props.loading);\n    }\n  }, [props.loading]);\n\n  var onChange = function onChange(nextTargetKeys, direction, moveKeys) {\n    setTargetKeys(nextTargetKeys);\n  };\n\n  var onSelectChange = function onSelectChange(sourceSelectedKeys, targetSelectedKeys) {\n    setSelectedKeys([].concat(_toConsumableArray(sourceSelectedKeys), _toConsumableArray(targetSelectedKeys)));\n  };\n\n  var handleOk = function handleOk() {\n    form.validateFields().then(function (_ref) {\n      var historyFirstYn = _ref.historyFirstYn,\n          detailList = _ref.detailList,\n          values = _objectWithoutProperties(_ref, [\"historyFirstYn\", \"detailList\"]);\n\n      values.historyFirstYn = historyFirstYn ? 1 : 0;\n      values.detailList = detailList.map(function (id) {\n        var item = props.userData.find(function (v) {\n          return v.id == id;\n        });\n        return {\n          accountId: id,\n          accountName: item.accountName\n        };\n      });\n      setLoading(true);\n      props.getFormData(values);\n    })[\"catch\"](function (errorInfo) {\n      console.error(errorInfo);\n    });\n  };\n\n  var layout = {\n    labelCol: {\n      span: 6\n    },\n    wrapperCol: {\n      span: 16\n    }\n  };\n  var tailLayout = {\n    wrapperCol: {\n      offset: 6,\n      span: 16\n    }\n  };\n  return __jsx(_Modal, {\n    title: \"\\u81EA\\u52A8\\u5206\\u6848\\u8BBE\\u7F6E\",\n    visible: props.visible,\n    confirmLoading: loading,\n    onOk: handleOk,\n    onCancel: function onCancel() {\n      return props.setVisible(false);\n    },\n    width: 860\n  }, __jsx(_Form, _extends({}, layout, {\n    form: form,\n    name: \"basic\"\n  }), __jsx(_Form.Item, {\n    label: \"\\u4EA7\\u54C1\\u540D\\u79F0\",\n    name: \"productId\",\n    rules: [{\n      required: true,\n      message: '请选择产品名称'\n    }]\n  }, __jsx(_Select, {\n    style: {\n      width: '200px'\n    },\n    placeholder: \"\\u8BF7\\u9009\\u62E9\"\n  }, props.collectionProducts.map(function (v) {\n    return __jsx(_Select.Option, {\n      value: +v.code,\n      key: v.code\n    }, v.description);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u903E\\u671F\\u7EA7\\u522B\",\n    name: \"collectionLevel\",\n    rules: [{\n      required: true,\n      message: '请选择逾期级别'\n    }]\n  }, __jsx(_Select, {\n    style: {\n      width: '200px'\n    },\n    placeholder: \"\\u8BF7\\u9009\\u62E9\"\n  }, props.levelData.map(function (v) {\n    return __jsx(_Select.Option, {\n      value: v.code,\n      key: v.code\n    }, v.description);\n  }))), __jsx(_Form.Item, _extends({}, tailLayout, {\n    name: \"historyFirstYn\",\n    valuePropName: \"checked\"\n  }), __jsx(_Checkbox, null, \"\\u4F18\\u5148\\u5206\\u914D\\uFF08\\u53EF\\u5173\\u8054\\u5386\\u53F2\\u8BA2\\u5355\\u7684\\u4EBA\\u5458\\uFF09\")), __jsx(_Form.Item, {\n    label: \"\\u59D4\\u6848\\u4EBA\\u5458\",\n    name: \"detailList\",\n    rules: [{\n      required: true,\n      message: '请选择委案人员'\n    }]\n  }, __jsx(_Transfer, {\n    rowKey: function rowKey(record) {\n      return record.id + '';\n    },\n    dataSource: props.userData,\n    titles: ['全部人员', '委案人员'],\n    targetKeys: targetKeys,\n    selectedKeys: selectedKeys,\n    onChange: onChange,\n    onSelectChange: onSelectChange,\n    render: function render(item) {\n      return item.accountName;\n    }\n  }))));\n}","map":null,"metadata":{},"sourceType":"module"}