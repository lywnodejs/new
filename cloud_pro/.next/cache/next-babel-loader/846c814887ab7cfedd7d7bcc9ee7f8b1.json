{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/breadcrumb/style\";\nimport _Breadcrumb from \"antd/lib/breadcrumb\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nimport \"antd/lib/tabs/style\";\nimport _Tabs from \"antd/lib/tabs\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect } from 'react';\nimport Router from 'next/router';\nimport nextId from 'react-id-generator';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport Sider from './Sider';\nimport { useContext, useState } from 'react';\nimport { Context } from '~/pages/_app';\nimport Header from './Header';\nimport styles from './Layout.less';\nimport NextNProgress from '../NextNProgress';\nconst {\n  TabPane\n} = _Tabs;\nconst {\n  Content\n} = _Layout;\nexport const TabContext = React.createContext();\nlet newTabIndex = 1;\n\nconst useTabs = children => {\n  const {\n    0: activeKey,\n    1: setActiveKey\n  } = useState(0);\n  const {\n    0: panes,\n    1: setPanes\n  } = useState([{\n    title: 'main',\n    content: children,\n    key: 0\n  }]);\n  useEffect(() => {\n    setPanes([{\n      title: 'main',\n      content: children,\n      key: 0\n    }]);\n    setActiveKey(0);\n  }, [children]);\n  const actions = {\n    push(content) {\n      const key = newTabIndex++;\n      setPanes([...panes, {\n        title: 'child',\n        content,\n        key\n      }]);\n      setActiveKey(key);\n    },\n\n    pop() {\n      if (panes.length === 1) return;\n      setPanes([...panes.slice(0, panes.length - 1)]);\n      setActiveKey(panes[0].key);\n    }\n\n  };\n  return [panes, activeKey, actions];\n};\n\nexport const CommonLayout = props => {\n  const {\n    breadcrumbs\n  } = props;\n  const {\n    0: collapsed,\n    1: setCollapsed\n  } = useState(false);\n  const [panes, activeKey, actions] = useTabs(props.children);\n\n  const onCollapseChange = collapsed => {\n    setCollapsed(collapsed);\n  };\n\n  return __jsx(_Layout, {\n    style: {\n      background: '#FFFFFF'\n    }\n  }, __jsx(NextNProgress, null), __jsx(Header, {\n    fixed: true\n    /* collapsed={collapsed} */\n    ,\n    onCollapseChange: onCollapseChange\n  }), __jsx(_Layout, null, __jsx(Sider, {\n    collapsed: collapsed\n  }), __jsx(\"div\", {\n    className: styles.wrap\n  }, __jsx(TabContext.Provider, {\n    value: actions\n  }, __jsx(_Tabs, {\n    renderTabBar: () => __jsx(\"div\", null),\n    activeKey: activeKey + ''\n  }, panes.map(pane => __jsx(TabPane, {\n    tab: pane.title,\n    key: pane.key\n  }, __jsx(\"div\", {\n    className: styles.container,\n    id: \"primaryLayout\"\n  }, React.cloneElement(pane.content, _objectSpread({\n    activeKey,\n    isFocus: activeKey === 0\n  }, actions))))))))));\n};\n\nconst body = props => {\n  const {\n    breadcrumbs,\n    extra,\n    hideTitle = false\n  } = props;\n  const router = useRouter();\n\n  const onBack = () => {\n    router.back();\n  };\n\n  return __jsx(Content, {\n    style: props.style,\n    className: styles.content\n  }, breadcrumbs && __jsx(_Breadcrumb, {\n    style: {\n      marginBottom: '17px'\n    }\n  }, breadcrumbs.map((breadcrumb, index) => __jsx(_Breadcrumb.Item, {\n    key: index\n  }, breadcrumb.path ? __jsx(Link, {\n    href: {\n      pathname: breadcrumb.path\n    }\n  }, __jsx(\"a\", {\n    style: {\n      color: '#333'\n    }\n  }, breadcrumb.text)) : breadcrumb.text))), __jsx(\"div\", {\n    className: styles.titleBar\n  }, __jsx(\"h1\", null, Array.isArray(breadcrumbs) && !hideTitle && breadcrumbs[breadcrumbs.length - 1].text), extra ? extra : Array.isArray(breadcrumbs) && breadcrumbs.length >= 3 && breadcrumbs[breadcrumbs.length - 2].path && __jsx(_Button, {\n    onClick: onBack\n  }, \"\\u8FD4\\u56DE\\u4E0A\\u4E00\\u9875\")), props.children);\n};\n\nexport default body;","map":{"version":3,"sources":["/Users/liuyawei/Desktop/信用算力/项目/cloud_pro/components/Layout/Layout.js"],"names":["React","useEffect","Router","nextId","Link","useRouter","Sider","useContext","useState","Context","Header","styles","NextNProgress","TabPane","Content","TabContext","createContext","newTabIndex","useTabs","children","activeKey","setActiveKey","panes","setPanes","title","content","key","actions","push","pop","length","slice","CommonLayout","props","breadcrumbs","collapsed","setCollapsed","onCollapseChange","background","wrap","map","pane","container","cloneElement","isFocus","body","extra","hideTitle","router","onBack","back","style","marginBottom","breadcrumb","index","path","pathname","color","text","titleBar","Array","isArray"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\nimport Router from 'next/router'\nimport nextId from 'react-id-generator'\nimport Link from 'next/link'\nimport {Layout, Menu, Dropdown, Breadcrumb, Button, Tabs} from 'antd'\nimport {useRouter} from 'next/router'\nimport Sider from './Sider'\nimport {useContext, useState} from 'react'\nimport {Context} from '~/pages/_app'\nimport Header from './Header'\nimport styles from './Layout.less'\nimport NextNProgress from '../NextNProgress'\nconst {TabPane} = Tabs\nconst {Content} = Layout\n\nexport const TabContext = React.createContext()\n\nlet newTabIndex = 1\nconst useTabs = (children) => {\n  const [activeKey, setActiveKey] = useState(0)\n  const [panes, setPanes] = useState([\n    {title: 'main', content: children, key: 0},\n  ])\n\n  useEffect(() => {\n    setPanes([{title: 'main', content: children, key: 0}])\n    setActiveKey(0)\n  }, [children])\n\n  const actions = {\n    push(content) {\n      const key = newTabIndex++\n      setPanes([...panes, {title: 'child', content, key}])\n      setActiveKey(key)\n    },\n    pop() {\n      if (panes.length === 1) return\n      setPanes([...panes.slice(0, panes.length - 1)])\n      setActiveKey(panes[0].key)\n    },\n  }\n  return [panes, activeKey, actions]\n}\n\nexport const CommonLayout = (props) => {\n  const {breadcrumbs} = props\n  const [collapsed, setCollapsed] = useState(false)\n  const [panes, activeKey, actions] = useTabs(props.children)\n\n  const onCollapseChange = (collapsed) => {\n    setCollapsed(collapsed)\n  }\n\n  return (\n    <Layout style={{background: '#FFFFFF'}}>\n      <NextNProgress />\n      <Header\n        fixed={true}\n        /* collapsed={collapsed} */\n        onCollapseChange={onCollapseChange}\n      />\n      <Layout>\n        <Sider collapsed={collapsed} />\n        <div className={styles.wrap}>\n          <TabContext.Provider value={actions}>\n            <Tabs renderTabBar={() => <div />} activeKey={activeKey + ''}>\n              {panes.map((pane) => (\n                <TabPane tab={pane.title} key={pane.key}>\n                  <div className={styles.container} id=\"primaryLayout\">\n                    {React.cloneElement(pane.content, {\n                      activeKey,\n                      isFocus: activeKey === 0,\n                      ...actions,\n                    })}\n                  </div>\n                </TabPane>\n              ))}\n            </Tabs>\n          </TabContext.Provider>\n        </div>\n      </Layout>\n    </Layout>\n  )\n}\n\nconst body = (props) => {\n  const {breadcrumbs, extra, hideTitle = false} = props\n  const router = useRouter()\n\n  const onBack = () => {\n    router.back()\n  }\n\n  return (\n    <Content style={props.style} className={styles.content}>\n      {breadcrumbs && (\n        <Breadcrumb style={{marginBottom: '17px'}}>\n          {breadcrumbs.map((breadcrumb, index) => (\n            <Breadcrumb.Item key={index}>\n              {breadcrumb.path ? (\n                <Link href={{pathname: breadcrumb.path}}>\n                  <a style={{color: '#333'}}>{breadcrumb.text}</a>\n                </Link>\n              ) : (\n                breadcrumb.text\n              )}\n            </Breadcrumb.Item>\n          ))}\n        </Breadcrumb>\n      )}\n      <div className={styles.titleBar}>\n        <h1>\n          {Array.isArray(breadcrumbs) &&\n            !hideTitle &&\n            breadcrumbs[breadcrumbs.length - 1].text}\n        </h1>\n        {extra\n          ? extra\n          : Array.isArray(breadcrumbs) &&\n            breadcrumbs.length >= 3 &&\n            breadcrumbs[breadcrumbs.length - 2].path && (\n              <Button onClick={onBack}>返回上一页</Button>\n            )}\n      </div>\n      {props.children}\n    </Content>\n  )\n}\n\nexport default body\n"]},"metadata":{},"sourceType":"module"}