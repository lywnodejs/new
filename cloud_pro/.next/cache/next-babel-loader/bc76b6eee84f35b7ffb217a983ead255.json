{"ast":null,"code":"import \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Router from 'next/router';\nimport api from '~/api/authority';\nimport moment from 'moment';\nimport { USER_AUTH } from '~/utils/const';\n\nconst TableList = ({\n  list,\n  onEdit,\n  pullData,\n  pageParams,\n  changePageParams\n}) => {\n  const columns = [{\n    title: '角色',\n    dataIndex: 'roleName',\n    key: 'roleName'\n  }, {\n    title: '角色描述',\n    dataIndex: 'description',\n    key: 'description'\n  }, {\n    title: '数据权限',\n    dataIndex: 'dataScope',\n    key: 'dataScope',\n    render: t => {\n      let item = USER_AUTH.find(v => v.key == t);\n      return item && item.name || '';\n    }\n  }, {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    key: 'createTime',\n    render: t => {\n      return moment(t).format('YYYY-MM-DD HH:mm:ss');\n    }\n  }, {\n    title: '操作',\n    dataIndex: 'cz',\n    key: 'cz',\n    width: 300,\n    render: (text, record, index) => {\n      return __jsx(React.Fragment, null, __jsx(_Button, {\n        type: \"link\",\n        onClick: () => onEdit(record)\n      }, \"\\u7F16\\u8F91\"), __jsx(_Button, {\n        type: \"link\",\n        onClick: () => onAuthConfig(record)\n      }, \"\\u529F\\u80FD\\u6743\\u9650\"), __jsx(_Popconfirm, {\n        title: \"\\u4F60\\u786E\\u5B9A\\u8981\\u5220\\u9664\\u4E48\\uFF1F\",\n        onConfirm: () => onDelete(record, index),\n        okText: \"\\u662F\",\n        cancelText: \"\\u5426\"\n      }, __jsx(_Button, {\n        type: \"link\"\n      }, \"\\u5220\\u9664\")));\n    }\n  }];\n\n  const onAuthConfig = record => {\n    let url = `/authority/role/detail?roleId=${record.id}`;\n    Router.push(url);\n  };\n\n  const onDelete = async record => {\n    _Modal.confirm({\n      content: '确定删除该项数据？',\n      onOk: async () => {\n        try {\n          const {\n            data\n          } = await api.deleteRole(record.id);\n\n          if (data.code == 0) {\n            pullData();\n\n            _message.success('删除成功');\n          }\n        } catch (errorInfo) {\n          console.log('Failed:', errorInfo);\n        }\n      }\n    });\n  };\n\n  const pagination = {\n    defaultCurrent: 1,\n    total: list.total,\n    pageSize: pageParams.pageSize,\n    showQuickJumper: true,\n    showSizeChanger: true,\n    current: pageParams.pageNo || 0,\n    showTotal: total => {\n      return `共 ${total} 条记录`;\n    },\n    onChange: (pageNumber, pageSize) => {\n      let obj = {\n        pageNo: pageParams.pageSize === pageSize ? pageNumber : 1,\n        pageSize\n      };\n      changePageParams(obj);\n    }\n  };\n  return __jsx(_Table, {\n    rowKey: \"id\",\n    dataSource: list.list,\n    columns: columns,\n    bordered: true,\n    pagination: pagination\n  });\n};\n\nexport default TableList;","map":null,"metadata":{},"sourceType":"module"}