{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/transfer/style\";\nimport _Transfer from \"antd/lib/transfer\";\nimport \"antd/lib/checkbox/style\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nexport default function (props) {\n  const {\n    0: targetKeys,\n    1: setTargetKeys\n  } = useState([]);\n  const {\n    0: selectedKeys,\n    1: setSelectedKeys\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  const [form] = _Form.useForm();\n\n  useEffect(() => {\n    if (props.visible) {\n      form.resetFields();\n\n      if (props.data) {\n        let params = _objectSpread({}, props.data);\n\n        if (Array.isArray(props.data.detailList)) {\n          let ids = props.data.detailList.map(v => v.accountId);\n          params.detailList = ids;\n          setTargetKeys(ids);\n        }\n\n        form.setFieldsValue(params);\n      }\n    } else {\n      setLoading(false);\n      setTargetKeys([]);\n      setSelectedKeys([]);\n    }\n  }, [props.visible]);\n  useEffect(() => {\n    if (!props.loading) {\n      setLoading(props.loading);\n    }\n  }, [props.loading]);\n\n  const onChange = (nextTargetKeys, direction, moveKeys) => {\n    setTargetKeys(nextTargetKeys);\n  };\n\n  const onSelectChange = (sourceSelectedKeys, targetSelectedKeys) => {\n    setSelectedKeys([...sourceSelectedKeys, ...targetSelectedKeys]);\n  };\n\n  const handleOk = () => {\n    form.validateFields().then((_ref) => {\n      let {\n        historyFirstYn,\n        detailList\n      } = _ref,\n          values = _objectWithoutProperties(_ref, [\"historyFirstYn\", \"detailList\"]);\n\n      values.historyFirstYn = historyFirstYn ? 1 : 0;\n      values.detailList = detailList.map(id => {\n        let item = props.userData.find(v => v.id == id);\n        return {\n          accountId: id,\n          accountName: item.accountName\n        };\n      });\n      setLoading(true);\n      props.getFormData(values);\n    }).catch(errorInfo => {\n      console.error(errorInfo);\n    });\n  };\n\n  const layout = {\n    labelCol: {\n      span: 6\n    },\n    wrapperCol: {\n      span: 16\n    }\n  };\n  const tailLayout = {\n    wrapperCol: {\n      offset: 6,\n      span: 16\n    }\n  };\n  return __jsx(_Modal, {\n    title: \"\\u81EA\\u52A8\\u5206\\u6848\\u8BBE\\u7F6E\",\n    visible: props.visible,\n    confirmLoading: loading,\n    onOk: handleOk,\n    onCancel: () => props.setVisible(false),\n    width: 860\n  }, __jsx(_Form, _extends({}, layout, {\n    form: form,\n    name: \"basic\"\n  }), __jsx(_Form.Item, {\n    label: \"\\u4EA7\\u54C1\\u540D\\u79F0\",\n    name: \"productId\",\n    rules: [{\n      required: true,\n      message: '请选择产品名称'\n    }]\n  }, __jsx(_Select, {\n    style: {\n      width: '200px'\n    },\n    placeholder: \"\\u8BF7\\u9009\\u62E9\"\n  }, props.collectionProducts.map(v => {\n    return __jsx(_Select.Option, {\n      value: +v.code,\n      key: v.code\n    }, v.description);\n  }))), __jsx(_Form.Item, {\n    label: \"\\u903E\\u671F\\u7EA7\\u522B\",\n    name: \"collectionLevel\",\n    rules: [{\n      required: true,\n      message: '请选择逾期级别'\n    }]\n  }, __jsx(_Select, {\n    style: {\n      width: '200px'\n    },\n    placeholder: \"\\u8BF7\\u9009\\u62E9\"\n  }, props.levelData.map(v => {\n    return __jsx(_Select.Option, {\n      value: v.code,\n      key: v.code\n    }, v.description);\n  }))), __jsx(_Form.Item, _extends({}, tailLayout, {\n    name: \"historyFirstYn\",\n    valuePropName: \"checked\"\n  }), __jsx(_Checkbox, null, \"\\u4F18\\u5148\\u5206\\u914D\\uFF08\\u53EF\\u5173\\u8054\\u5386\\u53F2\\u8BA2\\u5355\\u7684\\u4EBA\\u5458\\uFF09\")), __jsx(_Form.Item, {\n    label: \"\\u59D4\\u6848\\u4EBA\\u5458\",\n    name: \"detailList\",\n    rules: [{\n      required: true,\n      message: '请选择委案人员'\n    }]\n  }, __jsx(_Transfer, {\n    rowKey: record => record.id + '',\n    dataSource: props.userData,\n    titles: ['全部人员', '委案人员'],\n    targetKeys: targetKeys,\n    selectedKeys: selectedKeys,\n    onChange: onChange,\n    onSelectChange: onSelectChange,\n    render: item => item.accountName\n  }))));\n}","map":null,"metadata":{},"sourceType":"module"}