{"ast":null,"code":"import \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport { Layout } from '~/components/Layout';\nimport React, { useEffect, useState } from 'react';\nimport { InfoCircleTwoTone } from '@ant-design/icons';\nimport apiReview from '~/api/review';\n\nvar TableList = function TableList(_ref) {\n  var list = _ref.list,\n      onSearch = _ref.onSearch,\n      productId = _ref.productId,\n      personnelList = _ref.personnelList;\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState([]),\n      rowsData = _useState2[0],\n      setRowsData = _useState2[1];\n\n  var columns = [{\n    title: '委案人员姓名',\n    dataIndex: 'accountName',\n    key: 'accountName',\n    width: 180\n  }, {\n    title: '分案级别',\n    dataIndex: 'roleName',\n    key: 'roleName',\n    width: 180\n  }, {\n    title: '状态',\n    dataIndex: 'isOnLine',\n    key: 'isOnLine',\n    width: 180,\n    render: function render(text) {\n      return __jsx(React.Fragment, null, __jsx(_Badge, {\n        status: text == 1 ? 'success' : 'error'\n      }), text == 1 ? '在岗' : '离岗');\n    }\n  }, {\n    title: '操作',\n    dataIndex: 'CZ',\n    key: 'CZ',\n    width: 180,\n    render: function render(record, row) {\n      if (row.isOnLine == 1) {\n        return __jsx(\"a\", {\n          onClick: function onClick() {\n            return demobilized(row);\n          }\n        }, \"\\u79BB\\u5C97\");\n      } else {\n        return __jsx(\"a\", {\n          onClick: function onClick() {\n            return demobilized(row);\n          }\n        }, \"\\u5728\\u5C97\");\n      }\n    }\n  }];\n\n  var demobilized = function demobilized(row) {\n    setVisible(true);\n    setRowsData(row);\n  };\n\n  var reset = function reset() {\n    form.resetFields();\n    onSearch();\n  };\n\n  var handleOk = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$apiReview$fetc, _yield$apiReview$fetc2, data, code;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return apiReview.fetch_updateStatus_list({\n                productId: productId,\n                accountId: rowsData.id,\n                accountStatus: rowsData.isOnLine == 1 ? 2 : 1\n              });\n\n            case 3:\n              _yield$apiReview$fetc = _context.sent;\n              _yield$apiReview$fetc2 = _yield$apiReview$fetc.data;\n              data = _yield$apiReview$fetc2.data;\n              code = _yield$apiReview$fetc2.code;\n\n              if (code == 0) {\n                _message.success('人员状态切换成功');\n\n                setVisible(false);\n                personnelList({\n                  productId: productId\n                });\n              }\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function handleOk() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, null, __jsx(_Card, null, __jsx(\"div\", null, __jsx(_Form, {\n    form: form,\n    onFinish: function onFinish(values) {\n      onSearch(values);\n    },\n    layout: \"inline\",\n    className: \"searchForm\",\n    initialValues: {}\n  }, __jsx(_Form.Item, {\n    label: \"\\u59D4\\u6848\\u4EBA\\u5458\\u59D3\\u540D\",\n    name: \"accountName\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\"\n  })), __jsx(_Button, {\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"\\u67E5\\u8BE2\"), __jsx(_Button, {\n    style: {\n      marginLeft: 15\n    },\n    onClick: reset\n  }, \"\\u91CD\\u7F6E\"))), __jsx(_Table, {\n    style: {\n      marginTop: 20\n    },\n    rowKey: \"id\",\n    columns: columns,\n    dataSource: list,\n    bordered: true,\n    scroll: {\n      y: '100%',\n      x: '100%'\n    }\n  }), __jsx(_Modal, {\n    visible: visible,\n    onOk: handleOk,\n    onCancel: function onCancel() {\n      return setVisible(false);\n    },\n    okText: \"\\u786E\\u8BA4\",\n    cancelText: \"\\u53D6\\u6D88\"\n  }, __jsx(\"p\", null, __jsx(InfoCircleTwoTone, null), \" \\xA0\\xA0 \\u5207\\u6362\", __jsx(\"span\", {\n    style: {\n      color: '#1890ff',\n      fontWeight: 'bold'\n    }\n  }, ' ', \"\\xA0\", \"\".concat(rowsData.accountName), \"\\xA0\"), \"\\u72B6\\u6001\\u4ECE\", __jsx(\"span\", {\n    style: {\n      color: '#e65a6b'\n    }\n  }, \"\\xA0\", \"\".concat(rowsData.isOnLine == 1 ? '在岗' : '离岗'), \"\\xA0\"), \"\\u53D8\\u66F4\\u4E3A\", __jsx(\"span\", {\n    style: {\n      color: '#e65a6b'\n    }\n  }, \"\\xA0\", \"\".concat(rowsData.isOnLine == 1 ? '离岗' : '在岗'), \"\\xA0,\"), \"\\u786E\\u8BA4\\u8FD9\\u4E2A\\u64CD\\u4F5C\\u5417\\uFF1F\"))));\n};\n\nexport default TableList;","map":null,"metadata":{},"sourceType":"module"}